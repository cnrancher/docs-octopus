(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{137:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return o})),a.d(t,"metadata",(function(){return l})),a.d(t,"rightToc",(function(){return m})),a.d(t,"default",(function(){return i}));var r=a(2),b=a(9),n=(a(0),a(186)),c=a(188),o={id:"monitoring",title:"\u5173\u4e8e\u76d1\u63a7"},l={id:"cn/monitoring",title:"\u5173\u4e8e\u76d1\u63a7",description:"Octopus\u57fa\u4e8e[sigs.k8s.io/controller-runtime](https://github.com/kubernetes-sigs/controller-runtime)\u4e0a\u642d\u5efa\uff0c\u56e0\u6b64\u67d0\u4e9b\u6307\u6807\u4e0e\u63a7\u5236\u5668\u8fd0\u884c\u65f6\u548c[client-go](https://github.com/kubernetes/client-go)\u76f8\u5173\u3002 \u540c\u65f6[github.com/prometheus/client_golang](https://github.com/prometheus/client_golang)\u4e3a[Go runtime](https://golang.org/pkg/runtime/)\u63d0\u4f9b\u4e86\u4e00\u4e9b\u6307\u6807\u548c\u8fc7\u7a0b\u72b6\u6001\u3002",source:"@site/docs/cn/monitoring.md",permalink:"/docs-octopus/docs/cn/monitoring",editUrl:"https://github.com/cnrancher/docs-octopus/tree/master/docs/cn/monitoring.md",sidebar:"cn-docs",previous:{title:"Octopus \u5f00\u53d1\u6307\u5357",permalink:"/docs-octopus/docs/cn/develop"},next:{title:"Octopus UI",permalink:"/docs-octopus/docs/cn/Octopus-ui"}},m=[{value:"\u6307\u6807\u7c7b\u522b",id:"\u6307\u6807\u7c7b\u522b",children:[{value:"Controller Runtime\u6307\u6807\u5bf9\u7167\u8868",id:"controller-runtime\u6307\u6807\u5bf9\u7167\u8868",children:[]},{value:"Kubernetes \u5ba2\u6237\u7aef\u6307\u6807\u5bf9\u7167\u8868",id:"kubernetes-\u5ba2\u6237\u7aef\u6307\u6807\u5bf9\u7167\u8868",children:[]},{value:"Prometheus \u5ba2\u6237\u7aef\u6307\u6807\u5bf9\u7167\u8868",id:"prometheus-\u5ba2\u6237\u7aef\u6307\u6807\u5bf9\u7167\u8868",children:[]},{value:"Octopus\u6307\u6807\u5bf9\u7167\u8868",id:"octopus\u6307\u6807\u5bf9\u7167\u8868",children:[]}]},{value:"\u76d1\u63a7",id:"\u76d1\u63a7",children:[{value:"Grafana \u4eea\u8868\u677f",id:"grafana-\u4eea\u8868\u677f",children:[]},{value:"\u4e0ePrometheus Operator\u96c6\u6210",id:"\u4e0eprometheus-operator\u96c6\u6210",children:[]}]}],p={rightToc:m};function i(e){var t=e.components,a=Object(b.a)(e,["components"]);return Object(n.b)("wrapper",Object(r.a)({},p,a,{components:t,mdxType:"MDXLayout"}),Object(n.b)("p",null,"Octopus\u57fa\u4e8e",Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/kubernetes-sigs/controller-runtime"}),"sigs.k8s.io/controller-runtime"),"\u4e0a\u642d\u5efa\uff0c\u56e0\u6b64\u67d0\u4e9b\u6307\u6807\u4e0e\u63a7\u5236\u5668\u8fd0\u884c\u65f6\u548c",Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/kubernetes/client-go"}),"client-go"),"\u76f8\u5173\u3002 \u540c\u65f6",Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/prometheus/client_golang"}),"github.com/prometheus/client_golang"),"\u4e3a",Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://golang.org/pkg/runtime/"}),"Go runtime"),"\u63d0\u4f9b\u4e86\u4e00\u4e9b\u6307\u6807\u548c\u8fc7\u7a0b\u72b6\u6001\u3002"),Object(n.b)("h2",{id:"\u6307\u6807\u7c7b\u522b"},"\u6307\u6807\u7c7b\u522b"),Object(n.b)("p",null," \u5728 \u201c\u79cd\u7c7b\u201d\u5217\u4e2d\uff0c\u4f7f\u7528\u7b2c\u4e00\u4e2a\u5b57\u6bcd\u4ee3\u8868\u76f8\u5e94\u7684\u5355\u8bcd\uff1aG - \u4eea\u8868\uff08Gauge\uff09\uff0cC - \u8ba1\u6570\u5668\uff08Counter\uff09\uff0cH - \u67f1\u72b6\u56fe\uff08Histogram\uff09\uff0cS - \u6458\u8981\uff08Summary\uff09\u3002"),Object(n.b)("h3",{id:"controller-runtime\u6307\u6807\u5bf9\u7167\u8868"},"Controller Runtime\u6307\u6807\u5bf9\u7167\u8868"),Object(n.b)("h4",{id:"controller-\u53c2\u6570"},"Controller \u53c2\u6570"),Object(n.b)("table",null,Object(n.b)("thead",{parentName:"table"},Object(n.b)("tr",{parentName:"thead"},Object(n.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),"\u79cd\u7c7b"),Object(n.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),"\u540d\u79f0"),Object(n.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),"\u63cf\u8ff0"))),Object(n.b)("tbody",{parentName:"table"},Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"C"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/metrics/metrics.go#L25-L32"}),Object(n.b)("inlineCode",{parentName:"a"},"controller_runtime_reconcile_total"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u6bcf\u4e2a\u63a7\u5236\u5668\u7684reconcile\u603b\u6570")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"C"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/metrics/metrics.go#L34-L39"}),Object(n.b)("inlineCode",{parentName:"a"},"controller_runtime_reconcile_errors_total"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u6bcf\u4e2a\u63a7\u5236\u5668\u7684reconcile error\u603b\u6570")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"H"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/metrics/metrics.go#L41-L46"}),Object(n.b)("inlineCode",{parentName:"a"},"controller_runtime_reconcile_time_seconds"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u6bcf\u4e2a\u63a7\u5236\u5668\u7684reconcile\u65f6\u95f4")))),Object(n.b)("h4",{id:"webhook-\u53c2\u6570"},"Webhook \u53c2\u6570"),Object(n.b)("table",null,Object(n.b)("thead",{parentName:"table"},Object(n.b)("tr",{parentName:"thead"},Object(n.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),"\u79cd\u7c7b"),Object(n.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),"\u540d\u79f0"),Object(n.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),"\u63cf\u8ff0"))),Object(n.b)("tbody",{parentName:"table"},Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"H"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/sigs.k8s.io/controller-runtime/pkg/webhook/internal/metrics/metrics.go#L26-L34"}),Object(n.b)("inlineCode",{parentName:"a"},"controller_runtime_webhook_latency_seconds"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u5904\u7406\u8bf7\u6c42\u7684\u5ef6\u8fdf\u65f6\u95f4\u67f1\u72b6\u56fe")))),Object(n.b)("h3",{id:"kubernetes-\u5ba2\u6237\u7aef\u6307\u6807\u5bf9\u7167\u8868"},"Kubernetes \u5ba2\u6237\u7aef\u6307\u6807\u5bf9\u7167\u8868"),Object(n.b)("h4",{id:"rest-\u5ba2\u6237\u7aef\u53c2\u6570"},"Rest \u5ba2\u6237\u7aef\u53c2\u6570"),Object(n.b)("table",null,Object(n.b)("thead",{parentName:"table"},Object(n.b)("tr",{parentName:"thead"},Object(n.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),"\u79cd\u7c7b"),Object(n.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),"\u540d\u79f0"),Object(n.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),"\u63cf\u8ff0"))),Object(n.b)("tbody",{parentName:"table"},Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"C"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/sigs.k8s.io/controller-runtime/pkg/metrics/client_go_adapter.go#L44-L49"}),Object(n.b)("inlineCode",{parentName:"a"},"rest_client_requests_total"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"HTTP\u8bf7\u6c42\u7684\u6570\u91cf\uff0c\u6309\u72b6\u6001\u7801\u3001\u65b9\u6cd5\u548c\u4e3b\u673a\u5212\u5206\u3002")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"H"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/sigs.k8s.io/controller-runtime/pkg/metrics/client_go_adapter.go#L35-L42"}),Object(n.b)("inlineCode",{parentName:"a"},"rest_client_request_latency_seconds"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u8bf7\u6c42\u5ef6\u8fdf\u65f6\u95f4\uff0c\u4ee5\u79d2\u4e3a\u5355\u4f4d\u3002\u6309\u52a8\u8bcd\u548cURL\u5206\u7c7b\u3002")))),Object(n.b)("h4",{id:"workqueue-\u53c2\u6570"},"Workqueue \u53c2\u6570"),Object(n.b)("table",null,Object(n.b)("thead",{parentName:"table"},Object(n.b)("tr",{parentName:"thead"},Object(n.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),"\u79cd\u7c7b"),Object(n.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),"\u540d\u79f0"),Object(n.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),"\u63cf\u8ff0"))),Object(n.b)("tbody",{parentName:"table"},Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/sigs.k8s.io/controller-runtime/pkg/metrics/workqueue.go#L44-L49"}),Object(n.b)("inlineCode",{parentName:"a"},"workqueue_depth"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u5de5\u4f5c\u961f\u5217\u7684\u5f53\u524d\u6df1\u5ea6")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/sigs.k8s.io/controller-runtime/pkg/metrics/workqueue.go#L90-L98"}),Object(n.b)("inlineCode",{parentName:"a"},"workqueue_unfinished_work_seconds"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u6b63\u5728\u8fdb\u884c\u4e2d\uff0c\u8fd8\u6ca1\u6709\u88abwork_duration\u89c2\u5bdf\u5230\uff0c\u4e14\u6b63\u5728\u8fdb\u884c\u4e2d\u7684\u5de5\u4f5c\u6570\u91cf\uff0c\u6570\u503c\u8868\u793a\u5361\u4f4f\u7684\u7ebf\u7a0b\u6570\u91cf\u3002\u53ef\u4ee5\u901a\u8fc7\u89c2\u5bdf\u8fd9\u4e2a\u6570\u503c\u7684\u589e\u52a0\u901f\u5ea6\u6765\u63a8\u65ad\u5361\u6b7b\u7ebf\u7a0b\u7684\u6570\u91cf\u3002")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/sigs.k8s.io/controller-runtime/pkg/metrics/workqueue.go#L104-L110"}),Object(n.b)("inlineCode",{parentName:"a"},"workqueue_longest_running_processor_seconds"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u5de5\u4f5c\u961f\u5217\u8fd0\u884c\u65f6\u95f4\u6700\u957f\u7684\u5904\u7406\u5668\u5df2\u7ecf\u8fd0\u884c\u4e86\u591a\u5c11\u79d2")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"C"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/sigs.k8s.io/controller-runtime/pkg/metrics/workqueue.go#L55-L60"}),Object(n.b)("inlineCode",{parentName:"a"},"workqueue_adds_total"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u5de5\u4f5c\u961f\u5217\u5904\u7406\u7684\u6dfb\u52a0\u603b\u6570")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"C"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/sigs.k8s.io/controller-runtime/pkg/metrics/workqueue.go#L116-L121"}),Object(n.b)("inlineCode",{parentName:"a"},"workqueue_retries_total"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u5de5\u4f5c\u961f\u5217\u5904\u7406\u7684\u91cd\u8bd5\u6570\u91cf")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"H"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/sigs.k8s.io/controller-runtime/pkg/metrics/workqueue.go#L66-L72"}),Object(n.b)("inlineCode",{parentName:"a"},"workqueue_queue_duration_seconds"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u4e00\u4e2aitem\u5728\u88ab\u8bf7\u6c42\u4e4b\u524d\u5728\u5de5\u4f5c\u961f\u5217\u4e2d\u505c\u7559\u7684\u65f6\u95f4\uff0c\u4ee5\u79d2\u4e3a\u5355\u4f4d")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"H"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/sigs.k8s.io/controller-runtime/pkg/metrics/workqueue.go#L78-L84"}),Object(n.b)("inlineCode",{parentName:"a"},"workqueue_work_duration_seconds"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u4ece\u5de5\u4f5c\u961f\u5217\u5904\u7406\u4e00\u4e2a\u9879\u76ee\u9700\u8981\u591a\u957f\u65f6\u95f4\uff0c\u4ee5\u79d2\u4e3a\u5355\u4f4d")))),Object(n.b)("h3",{id:"prometheus-\u5ba2\u6237\u7aef\u6307\u6807\u5bf9\u7167\u8868"},"Prometheus \u5ba2\u6237\u7aef\u6307\u6807\u5bf9\u7167\u8868"),Object(n.b)("h4",{id:"go-runtime-\u53c2\u6570"},"Go runtime \u53c2\u6570"),Object(n.b)("table",null,Object(n.b)("thead",{parentName:"table"},Object(n.b)("tr",{parentName:"thead"},Object(n.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),"\u79cd\u7c7b"),Object(n.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),"\u540d\u79f0"),Object(n.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),"\u63cf\u8ff0"))),Object(n.b)("tbody",{parentName:"table"},Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L66-L69"}),Object(n.b)("inlineCode",{parentName:"a"},"go_goroutines"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u76ee\u524d\u5b58\u5728\u7684goroutines\u7684\u6570\u91cf")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L70-L73"}),Object(n.b)("inlineCode",{parentName:"a"},"go_threads"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u521b\u5efa\u7684\u64cd\u4f5c\u7cfb\u7edf\u7ebf\u7a0b\u6570")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L78-L81"}),Object(n.b)("inlineCode",{parentName:"a"},"go_info"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"GO\u73af\u5883\u7684\u4fe1\u606f")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"S"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L74-L77"}),Object(n.b)("inlineCode",{parentName:"a"},"go_gc_duration_seconds"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u5783\u573e\u6536\u96c6\u5468\u671f\u7684\u6682\u505c\u65f6\u95f4\u6c47\u603b")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L88-L94"}),Object(n.b)("inlineCode",{parentName:"a"},"go_memstats_alloc_bytes"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u5df2\u5206\u914d\u4e14\u4ecd\u5728\u4f7f\u7528\u7684\u5b57\u8282\u6570")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"C"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L96-L102"}),Object(n.b)("inlineCode",{parentName:"a"},"go_memstats_alloc_bytes_total"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u5206\u914d\u7684\u5b57\u8282\u603b\u6570\uff0c\u5305\u62ec\u5df2\u7ecf\u88ab\u91ca\u653e\u7684\u5b57\u8282")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L104-L110"}),Object(n.b)("inlineCode",{parentName:"a"},"go_memstats_sys_bytes"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u4ece\u7cfb\u7edf\u83b7\u5f97\u7684\u5b57\u8282\u6570")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"C"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L112-L118"}),Object(n.b)("inlineCode",{parentName:"a"},"go_memstats_lookups_total"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u6307\u9488\u67e5\u627e\u7684\u603b\u6b21\u6570")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"C"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L120-L126"}),Object(n.b)("inlineCode",{parentName:"a"},"go_memstats_mallocs_total"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u5df2\u5206\u914d\u5185\u5b58\u7684\u603b\u6570")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"C"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L128-L134"}),Object(n.b)("inlineCode",{parentName:"a"},"go_memstats_frees_total"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u5df2\u91ca\u653e\u5185\u5b58\u7684\u603b\u6570")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L136-L142"}),Object(n.b)("inlineCode",{parentName:"a"},"go_memstats_heap_alloc_bytes"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u5df2\u5206\u914d\u4e14\u4ecd\u5728\u4f7f\u7528\u7684heap\u5b57\u8282\u6570\u3002")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L144-L150"}),Object(n.b)("inlineCode",{parentName:"a"},"go_memstats_heap_sys_bytes"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u4ece\u7cfb\u7edf\u83b7\u5f97\u7684heap\u6570\u91cf")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L152-L158"}),Object(n.b)("inlineCode",{parentName:"a"},"go_memstats_heap_idle_bytes"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u672a\u4f7f\u7528\u7684heap\u5b57\u8282\u6570")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L160-L166"}),Object(n.b)("inlineCode",{parentName:"a"},"go_memstats_heap_inuse_bytes"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u6b63\u5728\u4f7f\u7528\u7684heap\u5b57\u8282\u6570")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L168-L174"}),Object(n.b)("inlineCode",{parentName:"a"},"go_memstats_heap_released_bytes"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u91ca\u653e\u7ed9OS\u7684heap\u5b57\u8282\u6570")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L176-L182"}),Object(n.b)("inlineCode",{parentName:"a"},"go_memstats_heap_objects"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u5df2\u5206\u914d\u5bf9\u8c61\u7684\u6570\u91cf")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L184-L190"}),Object(n.b)("inlineCode",{parentName:"a"},"go_memstats_stack_inuse_bytes"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"stack allocator\u4f7f\u7528\u7684\u5b57\u8282\u6570")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L192-L198"}),Object(n.b)("inlineCode",{parentName:"a"},"go_memstats_stack_sys_bytes"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"stack allocator\u4ece\u7cfb\u7edf\u83b7\u53d6\u7684\u5b57\u8282\u6570")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L200-L206"}),Object(n.b)("inlineCode",{parentName:"a"},"go_memstats_mspan_inuse_bytes"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u5185\u5b58\u8de8\u5ea6\u7ed3\u6784\u6240\u4f7f\u7528\u7684\u5b57\u8282\u6570\u3002")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L208-L214"}),Object(n.b)("inlineCode",{parentName:"a"},"go_memstats_mspan_sys_bytes"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u5185\u5b58\u8de8\u5ea6\u7ed3\u6784\u4ece\u7cfb\u7edf\u83b7\u53d6\u7684\u5b57\u8282\u6570")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L216-L222"}),Object(n.b)("inlineCode",{parentName:"a"},"go_memstats_mcache_inuse_bytes"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u5185\u5b58\u7f13\u5b58\u7ed3\u6784\u4f7f\u7528\u7684\u5b57\u8282\u6570\u3002")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L224-L230"}),Object(n.b)("inlineCode",{parentName:"a"},"go_memstats_mcache_sys_bytes"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u5185\u5b58\u7f13\u5b58\u7ed3\u6784\u4ece\u7cfb\u7edf\u83b7\u53d6\u7684\u5b57\u8282\u6570")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L232-L238"}),Object(n.b)("inlineCode",{parentName:"a"},"go_memstats_buck_hash_sys_bytes"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"profile bucket\u54c8\u5e0c\u8868\u4f7f\u7528\u7684\u5b57\u8282\u6570")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L240-L246"}),Object(n.b)("inlineCode",{parentName:"a"},"go_memstats_gc_sys_bytes"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u7528\u4e8e\u5783\u573e\u6536\u96c6\u7cfb\u7edf\u5143\u6570\u636e\u7684\u5b57\u8282\u6570")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L248-L254"}),Object(n.b)("inlineCode",{parentName:"a"},"go_memstats_other_sys_bytes"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u7528\u4e8e\u5176\u4ed6\u7cfb\u7edf\u5206\u914d\u7684\u5b57\u8282\u6570")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L256-L262"}),Object(n.b)("inlineCode",{parentName:"a"},"go_memstats_next_gc_bytes"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u4e0b\u4e00\u6b21\u8fdb\u884c\u5783\u573e\u6536\u96c6\u65f6\u7684heap\u5b57\u8282\u6570")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L264-L270"}),Object(n.b)("inlineCode",{parentName:"a"},"go_memstats_last_gc_time_seconds"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u81ea1970\u5e74\u4ee5\u6765\u6700\u540e\u4e00\u6b21\u6536\u96c6\u5783\u573e\u65f6\u95f4\uff0c\u7cbe\u786e\u5230\u79d2\u6570")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/go_collector.go#L272-L278"}),Object(n.b)("inlineCode",{parentName:"a"},"go_memstats_gc_cpu_fraction"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u81ea\u7a0b\u5e8f\u542f\u52a8\u4ee5\u6765\uff0cGC\u4f7f\u7528\u7684\u8be5\u7a0b\u5e8f\u53ef\u7528CPU\u65f6\u95f4\uff0c\u7cbe\u786e\u5230\u5206\u949f")))),Object(n.b)("h4",{id:"running-process-\u53c2\u6570"},"Running process \u53c2\u6570"),Object(n.b)("table",null,Object(n.b)("thead",{parentName:"table"},Object(n.b)("tr",{parentName:"thead"},Object(n.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),"\u79cd\u7c7b"),Object(n.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),"\u540d\u79f0"),Object(n.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),"\u63cf\u8ff0"))),Object(n.b)("tbody",{parentName:"table"},Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"C"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/process_collector.go#L71-L75"}),Object(n.b)("inlineCode",{parentName:"a"},"process_cpu_seconds_total"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u7528\u6237\u548c\u7cfb\u7edfCPU\u603b\u8017\u65f6\uff0c\u5355\u4f4d\u662f\u79d2")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/process_collector.go#L76-L80"}),Object(n.b)("inlineCode",{parentName:"a"},"process_open_fds"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u6253\u5f00\u7684\u7684file descriptors\u7684\u6570\u91cf\u3002")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/process_collector.go#L81-L85"}),Object(n.b)("inlineCode",{parentName:"a"},"process_max_fds"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"file descriptors\u6570\u91cf\u7684\u6700\u5927\u9650\u989d")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/process_collector.go#L86-L90"}),Object(n.b)("inlineCode",{parentName:"a"},"process_virtual_memory_bytes"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u865a\u62df\u5185\u5b58\u5927\u5c0f\uff08\u5355\u4f4d\uff1a\u5b57\u8282\uff09")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/process_collector.go#L91-L95"}),Object(n.b)("inlineCode",{parentName:"a"},"process_virtual_memory_max_bytes"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u865a\u62df\u5185\u5b58\u5927\u5c0f\u7684\u6700\u5927\u9650\u989d\uff08\u5355\u4f4d\uff1a\u5b57\u8282\uff09")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/process_collector.go#L96-L100"}),Object(n.b)("inlineCode",{parentName:"a"},"process_resident_memory_bytes"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u9884\u7559\u5185\u5b58\u5927\u5c0f\uff0c\u5355\u4f4d\uff1a\u5b57\u8282")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/vendor/github.com/prometheus/client_golang/prometheus/process_collector.go#L101-L105"}),Object(n.b)("inlineCode",{parentName:"a"},"process_start_time_seconds"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u8fdb\u7a0b\u81eaunix\u7eaa\u5143\u4ee5\u6765\u7684\u5f00\u59cb\u65f6\u95f4\uff08\u79d2\uff09")))),Object(n.b)("h3",{id:"octopus\u6307\u6807\u5bf9\u7167\u8868"},"Octopus\u6307\u6807\u5bf9\u7167\u8868"),Object(n.b)("h4",{id:"limb-\u53c2\u6570"},"Limb \u53c2\u6570"),Object(n.b)("table",null,Object(n.b)("thead",{parentName:"table"},Object(n.b)("tr",{parentName:"thead"},Object(n.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),"\u79cd\u7c7b"),Object(n.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),"\u540d\u79f0"),Object(n.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),"\u63cf\u8ff0"))),Object(n.b)("tbody",{parentName:"table"},Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"G"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/pkg/metrics/limb/metrics.go#L12-L19"}),Object(n.b)("inlineCode",{parentName:"a"},"limb_connect_connections"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u8fde\u63a5\u9002\u914d\u5668\u5f53\u524d\u7684\u8fde\u63a5\u6570\u91cf")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"C"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/pkg/metrics/limb/metrics.go#L21-L28"}),Object(n.b)("inlineCode",{parentName:"a"},"limb_connect_errors_total"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u8fde\u63a5\u9002\u914d\u5668\u65f6\u51fa\u73b0\u7684\u9519\u8bef\u603b\u6570")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"C"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/pkg/metrics/limb/metrics.go#L30-L37"}),Object(n.b)("inlineCode",{parentName:"a"},"limb_send_errors_total"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u9002\u914d\u5668\u6240\u9700\u53d1\u9001\u8bbe\u5907\u7684\u9519\u8bef\u603b\u6570")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"H"),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(n.b)("a",Object(r.a)({parentName:"td"},{href:"https://github.com/cnrancher/octopus/blob/master/pkg/metrics/limb/metrics.go#L39-L46"}),Object(n.b)("inlineCode",{parentName:"a"},"limb_send_latency_seconds"))),Object(n.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"\u9002\u914d\u5668\u6240\u9700\u53d1\u9001\u8bbe\u5907\u7684\u5ef6\u8fdf\u65f6\u95f4\u7684\u67f1\u72b6\u56fe")))),Object(n.b)("h2",{id:"\u76d1\u63a7"},"\u76d1\u63a7"),Object(n.b)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6307\u6807\u5c06\u5728\u7aef\u53e3 ",Object(n.b)("inlineCode",{parentName:"p"},"8080"),"\u4e0a\u516c\u5f00 (\u8bf7\u53c2\u9605",Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/cnrancher/octopus/blob/master/cmd/brain/options"}),"brain options"),"\u548c",Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/cnrancher/octopus/blob/master/cmd/limb/options"}),"limb options"),"\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7",Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://prometheus.io/"}),"Prometheus"),"\u8fdb\u884c\u6536\u96c6\uff0c\u5e76\u901a\u8fc7",Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://grafana.com/"}),"Grafana"),"\u8fdb\u884c\u53ef\u89c6\u5316\u5206\u6790\u3002 Octopus\u63d0\u4f9b\u4e86\u4e00\u4e2a",Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/cnrancher/octopus/blob/master/deploy/e2e/integrate_with_prometheus_operator.yaml"}),"ServiceMonitor\u5b9a\u4e49YAML"),"\u4e0e",Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/coreos/prometheus-operator"}),"Prometheus Operator"),"\u96c6\u6210\u7528\u4e8e\u914d\u7f6e\u548c\u7ba1\u7406Prometheus\u5b9e\u4f8b\u7684\u5de5\u5177\u3002"),Object(n.b)("h3",{id:"grafana-\u4eea\u8868\u677f"},"Grafana \u4eea\u8868\u677f"),Object(n.b)("p",null,"\u4e3a\u65b9\u4fbf\u8d77\u89c1\uff0cOctopus\u63d0\u4f9b\u4e86",Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/cnrancher/octopus/blob/master/deploy/e2e/integrate_with_grafana.json"}),"Grafana\u4eea\u8868\u677f"),"\u6765\u53ef\u89c6\u5316\u5c55\u793a\u76d1\u89c6\u6307\u6807\u3002"),Object(n.b)("img",{alt:"monitoring",src:Object(c.a)("img/monitoring.png")}),Object(n.b)("h3",{id:"\u4e0eprometheus-operator\u96c6\u6210"},"\u4e0ePrometheus Operator\u96c6\u6210"),Object(n.b)("p",null,"\u4f7f\u7528",Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/helm/charts/blob/master/stable/prometheus-operator"}),"prometheus-operator HELM\u56fe\u8868"),"\uff0c\u60a8\u53ef\u4ee5\u8f7b\u677e\u5730\u8bbe\u7f6ePrometheus Operator\u6765\u76d1\u89c6Octopus\u3002 \u4ee5\u4e0b\u6b65\u9aa4\u6f14\u793a\u4e86\u5982\u4f55\u5728\u672c\u5730Kubernetes\u96c6\u7fa4\u4e0a\u8fd0\u884cPrometheus Operator\uff1a"),Object(n.b)("ol",null,Object(n.b)("li",{parentName:"ol"},"\u4f7f\u7528",Object(n.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/cnrancher/octopus/blob/master/hack/cluster-k3d-spinup.sh"}),Object(n.b)("inlineCode",{parentName:"a"},"cluster-k3d-spinup.sh")),"\u901a\u8fc7",Object(n.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/rancher/k3s"}),"k3d"),"\u521b\u5efa\u672c\u5730Kubernetes\u96c6\u7fa4\u3002"),Object(n.b)("li",{parentName:"ol"},"\u6309\u7167",Object(n.b)("a",Object(r.a)({parentName:"li"},{href:"https://helm.sh/docs/intro/install/"}),"HELM\u7684\u5b89\u88c5\u6307\u5357"),"\u5b89\u88c5helm\u5de5\u5177\uff0c\u7136\u540e\u4f7f\u7528",Object(n.b)("inlineCode",{parentName:"li"},"helm fetch --untar --untardir /tmp stable/prometheus-operator")," \u5c06prometheus-operator\u56fe\u8868\u79fb\u81f3\u672c\u5730",Object(n.b)("inlineCode",{parentName:"li"},"/ tmp"),"\u76ee\u5f55\u3002"),Object(n.b)("li",{parentName:"ol"},"\u4eceprometheus-operator\u56fe\u8868\u751f\u6210\u90e8\u7f72YAML\uff0c\u5982\u4e0b\u6240\u793a\u3002",Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",Object(r.a)({parentName:"pre"},{className:"language-shell"}),"helm template --namespace octopus-monitoring \\\n  --name octopus \\\n  --set defaultRules.create=false \\\n  --set global.rbac.pspEnabled=false \\\n  --set prometheusOperator.admissionWebhooks.patch.enabled=false \\\n  --set prometheusOperator.admissionWebhooks.enabled=false \\\n  --set prometheusOperator.kubeletService.enabled=false \\\n  --set prometheusOperator.tlsProxy.enabled=false \\\n  --set prometheusOperator.serviceMonitor.selfMonitor=false \\\n  --set alertmanager.enabled=false \\\n  --set grafana.defaultDashboardsEnabled=false \\\n  --set coreDns.enabled=false \\\n  --set kubeApiServer.enabled=false \\\n  --set kubeControllerManager.enabled=false \\\n  --set kubeEtcd.enabled=false \\\n  --set kubeProxy.enabled=false \\\n  --set kubeScheduler.enabled=false \\\n  --set kubeStateMetrics.enabled=false \\\n  --set kubelet.enabled=false \\\n  --set nodeExporter.enabled=false \\\n  --set prometheus.serviceMonitor.selfMonitor=false \\\n  --set prometheus.ingress.enabled=true \\\n  --set prometheus.ingress.hosts={localhost} \\\n  --set prometheus.ingress.paths={/prometheus} \\\n  --set prometheus.ingress.annotations.'traefik\\.ingress\\.kubernetes\\.io\\/rewrite-target'=/ \\\n  --set prometheus.prometheusSpec.externalUrl=http://localhost/prometheus \\\n  --set prometheus.prometheusSpec.serviceMonitorSelectorNilUsesHelmValues=false \\\n  --set prometheus.prometheusSpec.podMonitorSelectorNilUsesHelmValues=false \\\n  --set prometheus.prometheusSpec.ruleSelectorNilUsesHelmValues=false \\\n  --set grafana.adminPassword=admin \\\n  --set grafana.rbac.pspUseAppArmor=false \\\n  --set grafana.rbac.pspEnabled=false \\\n  --set grafana.serviceMonitor.selfMonitor=false \\\n  --set grafana.testFramework.enabled=false \\\n  --set grafana.ingress.enabled=true \\\n  --set grafana.ingress.hosts={localhost} \\\n  --set grafana.ingress.path=/grafana \\\n  --set grafana.ingress.annotations.'traefik\\.ingress\\.kubernetes\\.io\\/rewrite-target'=/ \\\n  --set grafana.'grafana\\.ini'.server.root_url=http://localhost/grafana \\\n  /tmp/prometheus-operator > /tmp/prometheus-operator_all_in_one.yaml\n"))),Object(n.b)("li",{parentName:"ol"},"\u901a\u8fc7",Object(n.b)("inlineCode",{parentName:"li"},"kubectl create ns octopus-monitoring"),"\u521b\u5efa",Object(n.b)("inlineCode",{parentName:"li"},"octopus-monitoring"),"\u547d\u540d\u7a7a\u95f4\u3002"),Object(n.b)("li",{parentName:"ol"},"\u901a\u8fc7",Object(n.b)("inlineCode",{parentName:"li"},"kubectl apply -f /tmp/prometheus-operator_all_in_one.yaml"),"\u5c06prometheus-operator ",Object(n.b)("inlineCode",{parentName:"li"},"all-in-ine"),"\u90e8\u7f72\u4e8e\u672c\u5730\u96c6\u7fa4\u3002"),Object(n.b)("li",{parentName:"ol"},"(\u53ef\u9009)\u901a\u8fc7",Object(n.b)("inlineCode",{parentName:"li"},"kubectl apply -f https://raw.githubusercontent.com/cnrancher/octopus/master/deploy/e2e/all_in_one.yaml"),"\u6765\u90e8\u7f72Octopus"),Object(n.b)("li",{parentName:"ol"},"\u901a\u8fc7",Object(n.b)("inlineCode",{parentName:"li"},"kubectl apply -f https://raw.githubusercontent.com/cnrancher/octopus/master/deploy/e2e/integrate_with_prometheus_operator.yaml")," \u5c06\u76d1\u89c6\u96c6\u6210\u90e8\u7f72\u4e8e\u672c\u5730\u96c6\u7fa4\u3002"),Object(n.b)("li",{parentName:"ol"},"\u8bbf\u95ee",Object(n.b)("inlineCode",{parentName:"li"},"http://localhost/prometheus"),"\u4ee5\u901a\u8fc7\u6d4f\u89c8\u5668\u67e5\u770bPrometheus Web\u63a7\u5236\u53f0\uff0c\u6216\u8bbf\u95ee",Object(n.b)("inlineCode",{parentName:"li"},"http://localhost/grafana"),"\u4ee5\u67e5\u770bGrafana\u63a7\u5236\u53f0(\u7ba1\u7406\u5458\u5e10\u6237\u4e3a",Object(n.b)("inlineCode",{parentName:"li"},"admin/admin"),")\u3002"),Object(n.b)("li",{parentName:"ol"},"(\u53ef\u9009)\u4eceGrafana\u63a7\u5236\u53f0\u5bfc\u5165",Object(n.b)("a",Object(r.a)({parentName:"li"},{href:"https://raw.githubusercontent.com/cnrancher/octopus/master/deploy/e2e/integrate_with_grafana.json"}),"Octopus\u6982\u8ff0\u4eea\u8868\u677f"),"\u3002")))}i.isMDXComponent=!0},186:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return j}));var r=a(0),b=a.n(r);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,b=function(e,t){if(null==e)return{};var a,r,b={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(b[a]=e[a]);return b}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(b[a]=e[a])}return b}var m=b.a.createContext({}),p=function(e){var t=b.a.useContext(m),a=t;return e&&(a="function"==typeof e?e(t):o({},t,{},e)),a},i=function(e){var t=p(e.components);return b.a.createElement(m.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return b.a.createElement(b.a.Fragment,{},t)}},O=Object(r.forwardRef)((function(e,t){var a=e.components,r=e.mdxType,n=e.originalType,c=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),i=p(a),O=r,j=i["".concat(c,".").concat(O)]||i[O]||s[O]||n;return a?b.a.createElement(j,o({ref:t},m,{components:a})):b.a.createElement(j,o({ref:t},m))}));function j(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var n=a.length,c=new Array(n);c[0]=O;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,c[1]=o;for(var m=2;m<n;m++)c[m]=a[m];return b.a.createElement.apply(null,c)}return b.a.createElement.apply(null,a)}O.displayName="MDXCreateElement"},187:function(e,t,a){"use strict";var r=a(0),b=a(52);t.a=function(){return Object(r.useContext)(b.a)}},188:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));a(189);var r=a(187);function b(e){var t=(Object(r.a)().siteConfig||{}).baseUrl,a=void 0===t?"/":t;if(!e)return e;return/^(https?:|\/\/)/.test(e)?e:e.startsWith("/")?a+e.slice(1):a+e}},189:function(e,t,a){"use strict";var r=a(12),b=a(24),n=a(190),c="".startsWith;r(r.P+r.F*a(191)("startsWith"),"String",{startsWith:function(e){var t=n(this,e,"startsWith"),a=b(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return c?c.call(t,r,a):t.slice(a,a+r.length)===r}})},190:function(e,t,a){var r=a(76),b=a(25);e.exports=function(e,t,a){if(r(t))throw TypeError("String#"+a+" doesn't accept regex!");return String(b(e))}},191:function(e,t,a){var r=a(3)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[r]=!1,!"/./"[e](t)}catch(b){}}return!0}}}]);