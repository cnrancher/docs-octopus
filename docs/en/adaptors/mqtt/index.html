<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.54">


<title data-react-helmet="true">MQTT Adaptor | Octopus</title>

<meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="MQTT Adaptor | Octopus"><meta data-react-helmet="true" name="description" content="## Introduction"><meta data-react-helmet="true" property="og:description" content="## Introduction"><meta data-react-helmet="true" property="og:url" content="https://cnrancher.github.io/docs-octopus/docs/en/adaptors/mqtt">

<link data-react-helmet="true" rel="shortcut icon" href="/docs-octopus/img/favicon.ico">


<link rel="stylesheet" href="/docs-octopus/styles.29274c30.css">


<link rel="preload" href="/docs-octopus/styles.ce99c915.js" as="script">

<link rel="preload" href="/docs-octopus/runtime~main.7ea59745.js" as="script">

<link rel="preload" href="/docs-octopus/main.457e7cef.js" as="script">

<link rel="preload" href="/docs-octopus/1.6b9be2be.js" as="script">

<link rel="preload" href="/docs-octopus/2.ecc18e87.js" as="script">

<link rel="preload" href="/docs-octopus/47.8660cb97.js" as="script">

<link rel="preload" href="/docs-octopus/8ffbebae.8fb34b33.js" as="script">

<link rel="preload" href="/docs-octopus/17896441.213872fb.js" as="script">

<link rel="preload" href="/docs-octopus/b97fd391.7c2879aa.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/docs-octopus/"><img class="navbar__logo" src="/docs-octopus/img/logo.png" alt="Octopus Logo"><strong class="navbar__title">Octopus</strong></a><a class="navbar__item navbar__link" href="/docs-octopus/docs/cn/about">中文文档</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs-octopus/docs/en/about">Docs</a></div><div class="navbar__items navbar__items--right"><a target="_blank" rel="noopener noreferrer" href="https://cnrancher.github.io/docs-octopus/eng/" class="navbar__item navbar__link">English</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/cnrancher/octopus" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/docs-octopus/"><img class="navbar__logo" src="/docs-octopus/img/logo.png" alt="Octopus Logo"><strong class="navbar__title">Octopus</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" position="left" href="/docs-octopus/docs/cn/about">中文文档</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" position="left" href="/docs-octopus/docs/en/about">Docs</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://cnrancher.github.io/docs-octopus/eng/" class="menu__link" position="right">English</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/cnrancher/octopus" class="menu__link" position="right">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs-octopus/docs/en/about">About Octopus</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-octopus/docs/en/quick-start">Quick-Start Guide</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-octopus/docs/en/install">Installation</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">DeviceLink</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-octopus/docs/en/devicelink/about-dl">About DeviceLink</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs-octopus/docs/en/devicelink/state-of-dl">State of DeviceLink</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Device Adaptors</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-octopus/docs/en/adaptors/adaptor">How it Works</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-octopus/docs/en/adaptors/modbus">Modbus Adaptor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-octopus/docs/en/adaptors/opc-ua">OPC-UA Adaptor</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" tabindex="0" href="/docs-octopus/docs/en/adaptors/mqtt">MQTT Adaptor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-octopus/docs/en/adaptors/ble">BLE Adaptor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-octopus/docs/en/adaptors/dummy">Dummy Adaptor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-octopus/docs/en/adaptors/mqtt-extension">Integrate with MQTT</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs-octopus/docs/en/adaptors/develop">How to Develop Adaptor</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs-octopus/docs/en/develop">Develop Octopus</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-octopus/docs/en/monitoring">Monitoring Octopus</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-octopus/docs/en/octopus-ui">Octopus UI</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-octopus/docs/en/faq">FAQ</a></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">MQTT Adaptor</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="introduction"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#introduction" title="Direct link to heading">#</a>Introduction</h2><p><a href="http://mqtt.org/">MQTT</a> is a machine-to-machine (M2M)/&quot;Internet of Things&quot; connectivity protocol. It was designed as an extremely lightweight publish/subscribe messaging transport. It is useful for connections with remote locations where a small code footprint is required and/or network bandwidth is at a premium.</p><p>MQTT adaptor implements on <a href="https://github.com/eclipse/paho.mqtt.golang">paho.mqtt.golang</a> and helps to communicate with the MQTT broker to interact with linking equipment.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="gossip"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#gossip" title="Direct link to heading">#</a>Gossip</h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="data-structure"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#data-structure" title="Direct link to heading">#</a>Data Structure</h4><p>As we know, MQTT is structure-agnostic, so there is no standard <strong>topic</strong> naming schema and <strong>payload</strong> format. The way the publisher organizes the data structure will directly affect the usage of the subscriber. In the community, we have summarized two common patterns. Let&#x27;s take a look below.</p><p>The first pattern can be named as <strong>Attributed Topic</strong>: the publisher flattens properties into topics, and then sends the property&#x27;s payload to corresponding topic. It has a representative on Github: the <a href="https://homieiot.github.io/">Homie</a> MQTT convention.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    homie/kitchen/$homie -&gt; 4.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    homie/kitchen/$name  -&gt; &quot;Living Room&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    homie/kitchen/$node  -&gt; &quot;light,door&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    homie/kitchen/$state -&gt; &quot;ready&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    homie/kitchen/light/$name -&gt; &quot;Living room light&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    homie/kitchen/light/$type -&gt; &quot;LED&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    homie/kitchen/light/$properties -&gt; &quot;switch,gear,parameter_power,parameter_luminance,manufacturer,production_date,service_life&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    homie/kitchen/light/switch/$name -&gt; &quot;The switch of light&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    homie/kitchen/light/switch/$settable -&gt; &quot;true&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    homie/kitchen/light/switch/$datatype -&gt; &quot;boolean&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    homie/kitchen/light/switch -&gt; &quot;false&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    homie/kitchen/light/parameter_power/$name -&gt; &quot;The power of light&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    homie/kitchen/light/parameter_power/$settable -&gt; &quot;false&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    homie/kitchen/light/parameter_power/$datatype -&gt; &quot;float&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    homie/kitchen/light/parameter_power/$unit -&gt; &quot;watt&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    homie/kitchen/light/parameter_power -&gt; &quot;3.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span></div></div></div></div></div><p>Homie is interesting, its biggest feature is <strong>self-discovery</strong>, which means subscriber doesn&#x27;t need to know the data structure and just subscribe the root topic, and then the convention implementation client will reflect all properties, including the name, description, value, type and so on. However, <strong>Attributed Topic</strong> pattern creates a lot of topics, so it needs a Homie-like convention to ensure standardization and extensibility. </p><p>Another pattern of directly compressing attributes into one payload can be named as <strong>Attributed Message</strong>: The publisher serializes properties as one target format, such as XML, JSON or custom form, and then sends the entire serialized result to a topic. </p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    home/bedroom/light -&gt; {&quot;switch&quot;:&quot;on&quot;,&quot;action&quot;:{&quot;gear&quot;:&quot;low&quot;},&quot;parameter&quot;:{&quot;power&quot;:70,&quot;luminance&quot;:4900},&quot;production&quot;:{&quot;manufacturer&quot;:&quot;Rancher Octopus Fake Device&quot;,&quot;date&quot;:&quot;2020-07-09T13:00:00.00Z&quot;,&quot;serviceLife&quot;:&quot;P1Y0M0D&quot;}}</span></div></div></div></div></div><p><strong>Attributed Message</strong> pattern is topic saving, but the subscriber needs to know how to deserialize the payload in each topic and understand the organizational structure of data. A better way is to use the same serialization format in all topics and introduce a hierarchical description of the data structure. For example, if publisher choose JSON as the serialization format, publisher can attach the <a href="https://json-schema.org/">JSONSchema</a> of data structure in another topic.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    home/bedroom/light/$schema -&gt; {&quot;$schema&quot;:&quot;http://json-schema.org/draft-04/schema#&quot;,&quot;type&quot;:&quot;object&quot;,&quot;additionalProperties&quot;:true,&quot;properties&quot;:{&quot;switch&quot;:{&quot;description&quot;:&quot;The switch of light&quot;,&quot;type&quot;:&quot;boolean&quot;},&quot;action&quot;:{&quot;description&quot;:&quot;The action of light&quot;,&quot;type&quot;:&quot;object&quot;,&quot;additionalProperties&quot;:true,&quot;properties&quot;:{&quot;gear&quot;:{&quot;description&quot;:&quot;The gear of power&quot;,&quot;type&quot;:&quot;string&quot;}}},&quot;parameter&quot;:{&quot;description&quot;:&quot;The parameter of light&quot;,&quot;type&quot;:&quot;object&quot;,&quot;additionalProperties&quot;:true,&quot;properties&quot;:{&quot;power&quot;:{&quot;description&quot;:&quot;The power of light&quot;,&quot;type&quot;:&quot;float&quot;},&quot;luminance&quot;:{&quot;description&quot;:&quot;The luminance of light&quot;,&quot;type&quot;:&quot;int&quot;}}},&quot;production&quot;:{&quot;description&quot;:&quot;The production information of light&quot;,&quot;type&quot;:&quot;object&quot;,&quot;additionalProperties&quot;:true,&quot;properties&quot;:{&quot;manufacturer&quot;:{&quot;description&quot;:&quot;The manufacturer of light&quot;,&quot;type&quot;:&quot;string&quot;},&quot;date&quot;:{&quot;description&quot;:&quot;The production date of light&quot;,&quot;type&quot;:&quot;string&quot;},&quot;serviceLife&quot;:{&quot;description&quot;:&quot;The service life of light&quot;,&quot;type&quot;:&quot;string&quot;}}}}}</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="operation"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#operation" title="Direct link to heading">#</a>Operation</h4><p>In MQTT, there are only two ways of <strong>pub/sub</strong> for data: either perform <strong>pub/sub</strong> on the same topic, or divide <strong>pub/sub</strong> into two topics. </p><p>The first way is not popular, it may need to add operation commands to the payload.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    home/light -&gt; {&quot;$data&quot;:{&quot;on&quot;:true,&quot;brightness&quot;:4,&quot;power&quot;:{&quot;powerDissipation&quot;:&quot;10KWH&quot;,&quot;electricQuantity&quot;:19.99}}}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    home/light &lt;- {&quot;$set&quot;:{&quot;on&quot;:false}}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    home/light -&gt; {&quot;$set&quot;:{&quot;on&quot;:false}}</span></div></div></div></div></div><p>Although a system that uses declarative management(like <a href="http://kubernetes.io/">Kubernetes</a>) can avoid the above imperative operation, it is necessary to introduce a <strong>sub</strong> when the publisher did <strong>pub</strong>, which is unacceptable in an extremely low-power environment.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    home/light -&gt; {&quot;on&quot;:true,&quot;brightness&quot;:4,&quot;power&quot;:{&quot;powerDissipation&quot;:&quot;10KWH&quot;,&quot;electricQuantity&quot;:19.99}}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    home/light &lt;- {&quot;on&quot;:false}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    home/light -&gt; {&quot;on&quot;:false}</span></div></div></div></div></div><p>Therefore, the second way will be more easily to accept. Since the properties have been flatten in <strong>Attributed Topic</strong> pattern, the publisher can send the data to the topic with special suffix corresponding to the property. For example, the Homie prefers to use a topic with <code>set</code> ending to receive value changes.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    homie/light/on/$settable -&gt; &quot;true&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    homie/light/on -&gt; &quot;true&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    homie/light/on/set &lt;- &quot;false&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    homie/light/on -&gt; &quot;false&quot;</span></div></div></div></div></div><p>The same is true for <strong>Attributed Message</strong> pattern, expect that the publisher need to choose whether to only send modified properties or all properties.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    home/light -&gt; {&quot;on&quot;:&quot;true&quot;,&quot;brightness&quot;:4,&quot;power&quot;:{&quot;dissipation&quot;:&quot;10KWH&quot;,&quot;quantity&quot;:19.99}}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    home/light/set &lt;- {&quot;on&quot;:false}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    home/light -&gt; {&quot;on&quot;:false}</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="registration-information"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#registration-information" title="Direct link to heading">#</a>Registration Information</h2><table><thead><tr><th align="center">Versions</th><th align="center">Register Name</th><th align="center">Endpoint Socket</th><th align="center">Available</th></tr></thead><tbody><tr><td align="center"><code>v1alpha1</code></td><td align="center"><code>adaptors.edge.cattle.io/mqtt</code></td><td align="center"><code>mqtt.sock</code></td><td align="center">*</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="support-model"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#support-model" title="Direct link to heading">#</a>Support Model</h2><table><thead><tr><th align="center">Kind</th><th align="center">Group</th><th align="center">Version</th><th align="center">Available</th></tr></thead><tbody><tr><td align="center"><code>MQTTDevice</code></td><td align="center"><code>devices.edge.cattle.io</code></td><td align="center"><code>v1alpha1</code></td><td align="center">*</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="support-platform"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#support-platform" title="Direct link to heading">#</a>Support Platform</h2><table><thead><tr><th align="center">OS</th><th align="left">Arch</th></tr></thead><tbody><tr><td align="center"><code>linux</code></td><td align="left"><code>amd64</code></td></tr><tr><td align="center"><code>linux</code></td><td align="left"><code>arm</code></td></tr><tr><td align="center"><code>linux</code></td><td align="left"><code>arm64</code></td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="usage"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#usage" title="Direct link to heading">#</a>Usage</h2><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-shell codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -f https://raw.githubusercontent.com/cnrancher/octopus/master/adaptors/mqtt/deploy/e2e/all_in_one.yaml</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="authority"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#authority" title="Direct link to heading">#</a>Authority</h2><p>Grant permissions to Octopus as below :</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Resources                                   Non-Resource URLs  Resource Names  Verbs</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ---------                                   -----------------  --------------  -----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  mqttdevices.devices.edge.cattle.io         []                 []              [create delete get list patch update watch]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  mqttdevices.devices.edge.cattle.io/status  []                 []              [get patch update]</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="example"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#example" title="Direct link to heading">#</a>Example</h2><ul><li><p>Specifies a <code>MQTTDevice</code> device link to subscribe the information of kitchen room door.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-YAML codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: edge.cattle.io/v1alpha1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kind: DeviceLink</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  name: kitchen-door</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  adaptor:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    node: edge-worker</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    name: adaptors.edge.cattle.io/mqtt</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  model:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    apiVersion: &quot;devices.edge.cattle.io/v1alpha1&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    kind: &quot;MQTTDevice&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  template:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      labels:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        device: kitchen-door</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    spec:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      protocol:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        pattern: &quot;AttributedTopic&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        client:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          server: &quot;tcp://test.mosquitto.org:1883&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        message:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          topic: &quot;cattle.io/octopus/home/status/kitchen/door/:path&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      properties:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        - name: &quot;state&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          path: &quot;state&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          description: &quot;The state of door&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          type: &quot;string&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          annotations:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            type: &quot;enum&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            format: &quot;open,close&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        - name: &quot;width&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          path: &quot;width&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          description: &quot;The width of door&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          type: &quot;float&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          annotations:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            unit: &quot;meter&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        - name: &quot;height&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          path: &quot;height&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          description: &quot;The height of door&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          type: &quot;float&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          annotations: </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            unit: &quot;meter&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        - name: &quot;material&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          path: &quot;material&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          description: &quot;The material of light&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          type: &quot;string&quot;</span></div></div></div></div></div></li><li><p>Specifies a <code>MQTTDevice</code> device link to manage the bedroom light.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-YAML codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: edge.cattle.io/v1alpha1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kind: DeviceLink</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  name: bedroom-light</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  adaptor:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    node: edge-worker</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    name: adaptors.edge.cattle.io/mqtt</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  model:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    apiVersion: &quot;devices.edge.cattle.io/v1alpha1&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    kind: &quot;MQTTDevice&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  template:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      labels:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        device: bedroom-light</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    spec:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      protocol:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        pattern: &quot;AttributedMessage&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        client:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          server: &quot;tcp://test.mosquitto.org:1883&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        message:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          topic: &quot;cattle.io/octopus/home/bedroom/light/:operator&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          operator:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            write: &quot;set&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      properties:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        - name: &quot;switch&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          path: &quot;switch&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          description: &quot;The switch of light&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          type: &quot;boolean&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          readOnly: false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        - name: &quot;gear&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          path: &quot;action.gear&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          description: &quot;The gear of light&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          type: &quot;string&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          readOnly: false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          annotations:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            type: &quot;enum&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            format: &quot;low,mid,high&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        - name: &quot;power&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          path: &quot;parameter.power&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          description: &quot;The power of light&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          type: &quot;float&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          annotations:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            group: &quot;parameter&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            unit: &quot;watt&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        - name: &quot;luminance&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          path: &quot;parameter.luminance&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          description: &quot;The luminance of light&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          type: &quot;int&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          annotations:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            group: &quot;parameter&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            unit: &quot;luminance&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        - name: &quot;manufacturer&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          path: &quot;production.manufacturer&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          description: &quot;The manufacturer of light&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          type: &quot;string&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          annotations:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            group: &quot;production&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        - name: &quot;productionDate&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          path: &quot;production.date&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          description: &quot;The production date of light&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          type: &quot;string&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          annotations:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            group: &quot;production&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            type: &quot;datetime&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            standard: &quot;ISO 8601&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            format: &quot;YYYY-MM-DDThh:mm:ss.SSZ&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        - name: &quot;serviceLife&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          path: &quot;production.serviceLife&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          description: &quot;The service life of light&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          type: &quot;string&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          annotations:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            group: &quot;production&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            type: &quot;duration&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            standard: &quot;ISO 8601&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            format: &quot;PYYMMDD&quot;</span></div></div></div></div></div></li></ul><p>For more <code>MQTTDevice</code> device link examples, please refer to the <a href="https://github.com/cnrancher/octopus/tree/master/adaptors/mqtt/deploy/e2e">deploy/e2e</a> directory.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="mqttdevice"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mqttdevice" title="Direct link to heading">#</a>MQTTDevice</h2><table><thead><tr><th>Parameter</th><th>Description</th><th>Schema</th><th>Required</th></tr></thead><tbody><tr><td>metadata</td><td></td><td><a href="https://github.com/kubernetes/apimachinery/blob/master/pkg/apis/meta/v1/types.go#L110">metav1.ObjectMeta</a></td><td>false</td></tr><tr><td>spec</td><td>Defines the desired state of <code>MQTTDevice</code>.</td><td><a href="#mqttdevicespec">MQTTDeviceSpec</a></td><td>true</td></tr><tr><td>status</td><td>Defines the observed state of <code>MQTTDevice</code>.</td><td><a href="#mqttdevicestatus">MQTTDeviceStatus</a></td><td>false</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="mqttdevicespec"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mqttdevicespec" title="Direct link to heading">#</a>MQTTDeviceSpec</h3><table><thead><tr><th>Parameter</th><th>Description</th><th>Scheme</th><th>Required</th></tr></thead><tbody><tr><td>protocol</td><td>Specifies the protocol for accessing the MQTT service.</td><td><a href="#mqttdeviceprotocol">MQTTDeviceProtocol</a></td><td>true</td></tr><tr><td>properties</td><td>Specifies the properties of device.</td><td><a href="#mqttdeviceproperty">[]MQTTDeviceProperty</a></td><td>false</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="mqttdevicestatus"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mqttdevicestatus" title="Direct link to heading">#</a>MQTTDeviceStatus</h3><table><thead><tr><th>Parameter</th><th>Description</th><th>Scheme</th><th>Required</th></tr></thead><tbody><tr><td>properties</td><td>Reports the properties of device.</td><td><a href="#mqttdevicestatusproperty">[]MQTTDeviceStatusProperty</a></td><td>false</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="mqttdeviceprotocol"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mqttdeviceprotocol" title="Direct link to heading">#</a>MQTTDeviceProtocol</h4><table><thead><tr><th>Parameter</th><th>Description</th><th>Scheme</th><th>Required</th></tr></thead><tbody><tr><td>pattern</td><td>Specifies the pattern of MQTTDevice protocol.</td><td><a href="#mqttdevicepattern">MQTTDevicePattern</a></td><td>true</td></tr><tr><td>client</td><td>Specifies the client settings.</td><td><a href="/docs-octopus/docs/en/adaptors/mqtt-extension#mqttclientoptions">MQTTClientOptions</a></td><td>true</td></tr><tr><td>message</td><td>Specifies the message settings.</td><td><a href="/docs-octopus/docs/en/adaptors/mqtt-extension#mqttmessageoptions">MQTTMessageOptions</a></td><td>true</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="mqttdevicepattern"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mqttdevicepattern" title="Direct link to heading">#</a>MQTTDevicePattern</h4><table><thead><tr><th>Parameter</th><th>Description</th><th>Scheme</th></tr></thead><tbody><tr><td>AttributedMessage</td><td>Compress properties into one message, one topic has its all property values.</td><td>string</td></tr><tr><td>AttributedTopic</td><td>Flatten properties to topic, each topic has its own property value.</td><td>string</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="mqttdeviceproperty"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mqttdeviceproperty" title="Direct link to heading">#</a>MQTTDeviceProperty</h4><table><thead><tr><th>Parameter</th><th>Description</th><th>Scheme</th><th>Required</th></tr></thead><tbody><tr><td>annotations</td><td>Specifies the annotations of property.</td><td>map[string]string</td><td>false</td></tr><tr><td>name</td><td>Specifies the name of property.</td><td>string</td><td>true</td></tr><tr><td>description</td><td>Specifies the description of property.</td><td>string</td><td>false</td></tr><tr><td>readOnly</td><td>Specifies if the property is read-only, default to <code>true</code>.</td><td>*bool</td><td>false</td></tr><tr><td>type</td><td>Specifies the type of property.</td><td><a href="#mqttdevicepropertytype">MQTTDevicePropertyType</a></td><td>true</td></tr><tr><td>value</td><td>Specifies the value of property, only available in the writable property.</td><td><a href="#mqttdevicepropertyvalue">MQTTDevicePropertyValue</a></td><td>false</td></tr><tr><td>path</td><td>Specifies the path for rendering the <code>:path</code> keyword of topic, default is the same as the <code>name</code>. <br><br> In <code>AttributedTopic</code> pattern, this path will be rendered on topic; <br> In <code>AttributedMessage</code> pattern, this path should be a <a href="#available-jsonpath"><code>JSONPath</code></a> which can access the payload content.</td><td>string</td><td>false</td></tr><tr><td>operator</td><td>Specifies the operator for rendering the <code>:operator</code> keyword of topic.</td><td>*<a href="/docs-octopus/docs/en/adaptors/mqtt-extension#mqttmessagetopicoperator">MQTTMessageTopicOperator</a></td><td>false</td></tr><tr><td>qos</td><td>Specifies the QoS of the message, only available in <code>AttributedTopic</code> pattern. The default value is <code>1</code>.</td><td>*<a href="/docs-octopus/docs/en/adaptors/mqtt-extension#mqttmessageqoslevel">MQTTMessageQoSLevel</a></td><td>false</td></tr><tr><td>retained</td><td>Specifies if the last published message to be retained, only available in <code>AttributedTopic</code> pattern. The default is <code>true</code>.</td><td>*bool</td><td>false</td></tr></tbody></table><blockquote><p>In fact, MQTT adaptor will return the original data received by MQTT broker. Therefore, the meaning of <code>type</code> is not to tell MQTT adaptor how to deal with the payload, but for user to describe what is expected.</p></blockquote><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="mqttdevicestatusproperty"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mqttdevicestatusproperty" title="Direct link to heading">#</a>MQTTDeviceStatusProperty</h4><table><thead><tr><th>Parameter</th><th>Description</th><th>Scheme</th><th>Required</th></tr></thead><tbody><tr><td>annotations</td><td>Reports the annotations of property.</td><td>map[string]string</td><td>false</td></tr><tr><td>name</td><td>Reports the name of property.</td><td>string</td><td>false</td></tr><tr><td>description</td><td>Reports the description of property.</td><td>string</td><td>false</td></tr><tr><td>readOnly</td><td>Reports if the property is read-only.</td><td>*bool</td><td>false</td></tr><tr><td>type</td><td>Reports the type of property. <br></td><td><a href="#mqttdevicepropertytype">MQTTDevicePropertyType</a></td><td>false</td></tr><tr><td>value</td><td>Reports the value of property.</td><td><a href="#mqttdevicepropertyvalue">MQTTDevicePropertyValue</a></td><td>false</td></tr><tr><td>path</td><td>Reports the path for rendering the <code>:path</code> keyword of topic, default is the same as the <code>name</code></td><td>string</td><td>false</td></tr><tr><td>operator</td><td>Reports the operator for rendering the <code>:operator</code> keyword of topic.</td><td>*<a href="/docs-octopus/docs/en/adaptors/mqtt-extension#mqttmessagetopicoperator">MQTTMessageTopicOperator</a></td><td>false</td></tr><tr><td>qos</td><td>Reports the QoS of the message.</td><td>*<a href="/docs-octopus/docs/en/adaptors/mqtt-extension#mqttmessageqoslevel">MQTTMessageQoSLevel</a></td><td>false</td></tr><tr><td>retained</td><td>Reports if the last published message to be retained.</td><td>*bool</td><td>false</td></tr><tr><td>updatedAt</td><td>Reports the updated timestamp of property.</td><td>*<a href="https://github.com/kubernetes/apimachinery/blob/master/pkg/apis/meta/v1/time.go#L33">metav1.Time</a></td><td>false</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="mqttdevicepropertytype"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mqttdevicepropertytype" title="Direct link to heading">#</a>MQTTDevicePropertyType</h4><table><thead><tr><th>Parameter</th><th>Description</th><th>Scheme</th></tr></thead><tbody><tr><td>string</td><td>Property data type is string.</td><td>string</td></tr><tr><td>int</td><td>Property data type is int.</td><td>string</td></tr><tr><td>float</td><td>Property data type is float.</td><td>string</td></tr><tr><td>boolean</td><td>Property data type is boolean.</td><td>string</td></tr><tr><td>array</td><td>Property data type is array.</td><td>string</td></tr><tr><td>object</td><td>Property data type is object.</td><td>string</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="mqttdevicepropertyvalue"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mqttdevicepropertyvalue" title="Direct link to heading">#</a>MQTTDevicePropertyValue</h4><p>MQTTDevicePropertyValue needs to be inputed with the corresponding content according to the <code>type</code>. For example:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-YAML codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: edge.cattle.io/v1alpha1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kind: DeviceLink</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  template:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    spec:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      properties:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        - name: &quot;string&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          readOnly: false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          type: &quot;string&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          value: &quot;str&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        - name: &quot;int&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          readOnly: false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          type: &quot;int&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          value: 1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        - name: &quot;float&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          readOnly: false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          type: &quot;float&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          value: 3.3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        - name: &quot;bool&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          readOnly: false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          type: &quot;boolean&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          value: true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        - name: &quot;array&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          readOnly: false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          type: &quot;array&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          value:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            - item-1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            - item-2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            - item-3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        - name: &quot;object&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          readOnly: false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          type: &quot;object&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          value:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            name: &quot;james&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            age: 12</span></div></div></div></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/cnrancher/docs-octopus/tree/master/docs/en/adaptors/mqtt.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs-octopus/docs/en/adaptors/opc-ua"><div class="pagination-nav__link--sublabel">Previous</div><div class="pagination-nav__link--label">« OPC-UA Adaptor</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs-octopus/docs/en/adaptors/ble"><div class="pagination-nav__link--sublabel">Next</div><div class="pagination-nav__link--label">BLE Adaptor »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#introduction" class="contents__link">Introduction</a><ul><li><a href="#gossip" class="contents__link">Gossip</a></li></ul></li><li><a href="#registration-information" class="contents__link">Registration Information</a></li><li><a href="#support-model" class="contents__link">Support Model</a></li><li><a href="#support-platform" class="contents__link">Support Platform</a></li><li><a href="#usage" class="contents__link">Usage</a></li><li><a href="#authority" class="contents__link">Authority</a></li><li><a href="#example" class="contents__link">Example</a></li><li><a href="#mqttdevice" class="contents__link">MQTTDevice</a><ul><li><a href="#mqttdevicespec" class="contents__link">MQTTDeviceSpec</a></li><li><a href="#mqttdevicestatus" class="contents__link">MQTTDeviceStatus</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs-octopus/docs/cn/about">关于 Octopus</a></li><li class="footer__item"><a class="footer__link-item" href="/docs-octopus/docs/cn/quick-start">快速入门指南</a></li><li class="footer__item"><a class="footer__link-item" href="/docs-octopus/docs/cn/adaptors/develop">开发适配器</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">社区相关</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://www.rancher.cn">Rancher 官网</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://slack.rancher.io">Slack</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">更多</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://github.com/cnrancher/octopus">GitHub</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://github.com/cnrancher/octopus-chart">Helm Chart</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 <a href="https://www.rancher.cn/">Rancher Labs, Inc.</a> Built with love.</div></div></div></footer>
</div>

<script src="/docs-octopus/styles.ce99c915.js"></script>

<script src="/docs-octopus/runtime~main.7ea59745.js"></script>

<script src="/docs-octopus/main.457e7cef.js"></script>

<script src="/docs-octopus/1.6b9be2be.js"></script>

<script src="/docs-octopus/2.ecc18e87.js"></script>

<script src="/docs-octopus/47.8660cb97.js"></script>

<script src="/docs-octopus/8ffbebae.8fb34b33.js"></script>

<script src="/docs-octopus/17896441.213872fb.js"></script>

<script src="/docs-octopus/b97fd391.7c2879aa.js"></script>


</body>
</html>