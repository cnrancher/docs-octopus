(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{177:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return o})),a.d(t,"metadata",(function(){return c})),a.d(t,"rightToc",(function(){return p})),a.d(t,"default",(function(){return l}));var n=a(2),r=a(9),i=(a(0),a(187)),o={id:"mqtt",title:"MQTT Adaptor"},c={id:"en/adaptors/mqtt",title:"MQTT Adaptor",description:"## Introduction",source:"@site/docs/en/adaptors/mqtt.md",permalink:"/docs-octopus/docs/en/adaptors/mqtt",editUrl:"https://github.com/cnrancher/docs-octopus/tree/master/docs/en/adaptors/mqtt.md",sidebar:"docs",previous:{title:"OPC-UA Adaptor",permalink:"/docs-octopus/docs/en/adaptors/opc-ua"},next:{title:"BLE Adaptor",permalink:"/docs-octopus/docs/en/adaptors/ble"}},p=[{value:"Introduction",id:"introduction",children:[{value:"Gossip",id:"gossip",children:[]},{value:"Convention",id:"convention",children:[]},{value:"JSONPath",id:"jsonpath",children:[]},{value:"User Story",id:"user-story",children:[]}]},{value:"Registration Information",id:"registration-information",children:[]},{value:"Support Model",id:"support-model",children:[]},{value:"Support Platform",id:"support-platform",children:[]},{value:"Usage",id:"usage",children:[]},{value:"Authority",id:"authority",children:[]},{value:"Example",id:"example",children:[]},{value:"MQTTDevice",id:"mqttdevice",children:[{value:"MQTTDeviceSpec",id:"mqttdevicespec",children:[]},{value:"MQTTDeviceStatus",id:"mqttdevicestatus",children:[]}]}],b={rightToc:p};function l(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(n.a)({},b,a,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"introduction"},"Introduction"),Object(i.b)("p",null,Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"http://mqtt.org/"}),"MQTT"),' is a machine-to-machine (M2M)/"Internet of Things" connectivity protocol. It was designed as an extremely lightweight publish/subscribe messaging transport. It is useful for connections with remote locations where a small code footprint is required and/or network bandwidth is at a premium.'),Object(i.b)("p",null,"MQTT adaptor implements on ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/eclipse/paho.mqtt.golang"}),"paho.mqtt.golang")," and helps to communicate with the MQTT broker to interact with linking equipment."),Object(i.b)("h3",{id:"gossip"},"Gossip"),Object(i.b)("h4",{id:"data-structure"},"Data Structure"),Object(i.b)("p",null,"As we know, MQTT is structure-agnostic, so there is no standard ",Object(i.b)("strong",{parentName:"p"},"topic")," naming schema and ",Object(i.b)("strong",{parentName:"p"},"payload")," format. The way the publisher organizes the data structure will directly affect the usage of the subscriber. In the community, we have summarized two common patterns. Let's take a look below."),Object(i.b)("p",null,"The first pattern can be named as ",Object(i.b)("strong",{parentName:"p"},"Attributed Topic"),": the publisher flattens properties into topics, and then sends the property's payload to corresponding topic. It has a representative on Github: the ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://homieiot.github.io/"}),"Homie")," MQTT convention."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{}),'homie/kitchen/$homie -> 4.0\nhomie/kitchen/$name  -> "Living Room"\nhomie/kitchen/$node  -> "light,door"\nhomie/kitchen/$state -> "ready"\n\nhomie/kitchen/light/$name -> "Living room light"\nhomie/kitchen/light/$type -> "LED"\nhomie/kitchen/light/$properties -> "switch,gear,parameter_power,parameter_luminance,manufacturer,production_date,service_life"\n...\n\nhomie/kitchen/light/switch/$name -> "The switch of light"\nhomie/kitchen/light/switch/$settable -> "true"\nhomie/kitchen/light/switch/$datatype -> "boolean"\nhomie/kitchen/light/switch -> "false"\n...\nhomie/kitchen/light/parameter_power/$name -> "The power of light"\nhomie/kitchen/light/parameter_power/$settable -> "false"\nhomie/kitchen/light/parameter_power/$datatype -> "float"\nhomie/kitchen/light/parameter_power/$unit -> "watt"\nhomie/kitchen/light/parameter_power -> "3.0"\n    ...\n')),Object(i.b)("p",null,"Homie is interesting, its biggest feature is ",Object(i.b)("strong",{parentName:"p"},"self-discovery"),", which means subscriber doesn't need to know the data structure and just subscribe the root topic, and then the convention implementation client will reflect all properties, including the name, description, value, type and so on. However, ",Object(i.b)("strong",{parentName:"p"},"Attributed Topic")," pattern creates a lot of topics, so it needs a Homie-like convention to ensure standardization and extensibility. "),Object(i.b)("p",null,"Another pattern of directly compressing attributes into one payload can be named as ",Object(i.b)("strong",{parentName:"p"},"Attributed Message"),": The publisher serializes properties as one target format, such as XML, JSON or custom form, and then sends the entire serialized result to a topic. "),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{}),'home/bedroom/light -> {"switch":true,"action":{"gear":"low"},"parameter":{"power":70,"luminance":4900},"production":{"manufacturer":"Rancher Octopus Fake Device","date":"2020-07-09T13:00:00.00Z","serviceLife":"P1Y0M0D"}}\n')),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Attributed Message")," pattern is topic saving, but the subscriber needs to know how to deserialize the payload in each topic and understand the organizational structure of data. A better way is to use the same serialization format in all topics and introduce a hierarchical description of the data structure. For example, if publisher choose JSON as the serialization format, publisher can attach the ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://json-schema.org/"}),"JSONSchema")," of data structure in another topic."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{}),'home/bedroom/light/$schema -> {"$schema":"http://json-schema.org/draft-04/schema#","type":"object","additionalProperties":true,"properties":{"switch":{"description":"The switch of light","type":"boolean"},"action":{"description":"The action of light","type":"object","additionalProperties":true,"properties":{"gear":{"description":"The gear of power","type":"string"}}},"parameter":{"description":"The parameter of light","type":"object","additionalProperties":true,"properties":{"power":{"description":"The power of light","type":"float"},"luminance":{"description":"The luminance of light","type":"int"}}},"production":{"description":"The production information of light","type":"object","additionalProperties":true,"properties":{"manufacturer":{"description":"The manufacturer of light","type":"string"},"date":{"description":"The production date of light","type":"string"},"serviceLife":{"description":"The service life of light","type":"string"}}}}}\n')),Object(i.b)("h4",{id:"operation"},"Operation"),Object(i.b)("p",null,"In MQTT, there are only two ways of ",Object(i.b)("strong",{parentName:"p"},"pub/sub")," for data: either perform ",Object(i.b)("strong",{parentName:"p"},"pub/sub")," on the same topic, or divide ",Object(i.b)("strong",{parentName:"p"},"pub/sub")," into two topics. "),Object(i.b)("p",null,"The first way is not popular, it may need to add operation commands to the payload."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{}),'home/light -> {"$data":{"on":true,"brightness":4,"power":{"powerDissipation":"10KWH","electricQuantity":19.99}}}\n\nhome/light <- {"$set":{"on":false}}\nhome/light -> {"$set":{"on":false}}\n')),Object(i.b)("p",null,"Although a system that uses declarative management(like ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"http://kubernetes.io/"}),"Kubernetes"),") can avoid the above imperative operation, it is necessary to introduce a ",Object(i.b)("strong",{parentName:"p"},"sub")," when the publisher did ",Object(i.b)("strong",{parentName:"p"},"pub"),", which is unacceptable in an extremely low-power environment."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{}),'home/light -> {"on":true,"brightness":4,"power":{"powerDissipation":"10KWH","electricQuantity":19.99}}\n\nhome/light <- {"on":false}\nhome/light -> {"on":false}\n')),Object(i.b)("p",null,"Therefore, the second way will be more easily to accept. Since the properties have been flatten in ",Object(i.b)("strong",{parentName:"p"},"Attributed Topic")," pattern, the publisher can send the data to the topic with special suffix corresponding to the property. For example, the Homie prefers to use a topic with ",Object(i.b)("inlineCode",{parentName:"p"},"set")," ending to receive value changes."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{}),'homie/light/on/$settable -> "true"\nhomie/light/on -> "true"\n\nhomie/light/on/set <- "false"\nhomie/light/on -> "false"\n')),Object(i.b)("p",null,"The same is true for ",Object(i.b)("strong",{parentName:"p"},"Attributed Message")," pattern, expect that the publisher need to choose whether to only send modified properties or all properties."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{}),'home/light -> {"on":"true","brightness":4,"power":{"dissipation":"10KWH","quantity":19.99}}\n\nhome/light/set <- {"on":false}\nhome/light -> {"on":false}\n')),Object(i.b)("h3",{id:"convention"},"Convention"),Object(i.b)("p",null,"MQTTDevice integrated the configuration of ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"/docs-octopus/docs/en/adaptors/mqtt-extension#specification"}),"MQTT extension"),"."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-diff"}),'apiVersion: edge.cattle.io/v1alpha1\nkind: DeviceLink\n...\nspec:\n  adaptor:\n    ...\n    name: adaptors.edge.cattle.io/mqtt\n  model:\n    apiVersion: "devices.edge.cattle.io/v1alpha1"\n    kind: "MQTTDevice"\n  template:\n    spec:\n      protocol:\n        pattern: "..."\n+       client:\n+         ...\n+       message:\n+         ...\n      ...\n')),Object(i.b)("h4",{id:"attributedtopic-pattern"},"AttributedTopic Pattern"),Object(i.b)("p",null,"Specifies ",Object(i.b)("inlineCode",{parentName:"p"},"pattern: AttributedTopic")," to interact with equipment that flattens its properties in multiple topics."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-diff"}),'apiVersion: edge.cattle.io/v1alpha1\nkind: DeviceLink\n...\nspec:\n  adaptor:\n    ...\n    name: adaptors.edge.cattle.io/mqtt\n  model:\n    apiVersion: "devices.edge.cattle.io/v1alpha1"\n    kind: "MQTTDevice"\n  template:\n    spec:\n      protocol:\n+       pattern: "AttributedTopic"\n        client:\n          ...\n        message:\n          ...\n      ...\n')),Object(i.b)("p",null,"Specifies ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"/docs-octopus/docs/en/adaptors/mqtt-extension#templated-topic"}),"templated topic")," with ",Object(i.b)("inlineCode",{parentName:"p"},":path")," keyword to render the target topic corresponding to property name."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-diff"}),'apiVersion: edge.cattle.io/v1alpha1\nkind: DeviceLink\n...\nspec:\n  adaptor:\n    ...\n    name: adaptors.edge.cattle.io/mqtt\n  model:\n    apiVersion: "devices.edge.cattle.io/v1alpha1"\n    kind: "MQTTDevice"\n  template:\n    spec:\n      protocol:\n        pattern: "AttributedTopic"\n        client:\n          ...\n        message:\n+         topic: "cattle.io/octopus/home/your/device/:path"\n      properties:\n+       # subscribes to "cattle.io/octopus/home/your/device/property-a" topic\n+       - name: property-a\n+         type: string\n')),Object(i.b)("p",null,"Or explicitly indicates the ",Object(i.b)("inlineCode",{parentName:"p"},":path")," with ",Object(i.b)("inlineCode",{parentName:"p"},"path")," field."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-diff"}),'apiVersion: edge.cattle.io/v1alpha1\nkind: DeviceLink\n...\nspec:\n  adaptor:\n    ...\n    name: adaptors.edge.cattle.io/mqtt\n  model:\n    apiVersion: "devices.edge.cattle.io/v1alpha1"\n    kind: "MQTTDevice"\n  template:\n    spec:\n      protocol:\n        pattern: "AttributedTopic"\n        client:\n          ...\n        message:\n          topic: "cattle.io/octopus/home/your/device/:path"\n      properties:\n        # subscribes to "cattle.io/octopus/home/your/device/property-a" topic\n        - name: property-a\n          type: string\n+       # subscribes to "cattle.io/octopus/home/your/device/path/to/property-b" topic\n+       - name: property-b\n+         path: "path/to/property-b"\n+         type: string\n')),Object(i.b)("p",null,"Specifies a writable property with ",Object(i.b)("inlineCode",{parentName:"p"},"readOnly: false"),"."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-diff"}),'apiVersion: edge.cattle.io/v1alpha1\nkind: DeviceLink\n...\nspec:\n  adaptor:\n    ...\n    name: adaptors.edge.cattle.io/mqtt\n  model:\n    apiVersion: "devices.edge.cattle.io/v1alpha1"\n    kind: "MQTTDevice"\n  template:\n    spec:\n      protocol:\n        pattern: "AttributedTopic"\n        client:\n          ...\n        message:\n          topic: "cattle.io/octopus/home/your/device/:path"\n      properties:\n        # subscribes to "cattle.io/octopus/home/your/device/property-a" topic\n        - name: property-a\n          type: string\n        # subscribes to "cattle.io/octopus/home/your/device/path/to/property-b" topic\n        - name: property-b\n          path: "path/to/property-b"\n          type: string\n+       # subscribes to "cattle.io/octopus/home/your/device/property-c" topic\n+       # publishes  to "cattle.io/octopus/home/your/device/property-c" topic\n+       - name: property-c\n+         readOnly: false\n+         type: string\n')),Object(i.b)("p",null,"Changes the writable property to publish to another topic."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-diff"}),'apiVersion: edge.cattle.io/v1alpha1\nkind: DeviceLink\n...\nspec:\n  adaptor:\n    ...\n    name: adaptors.edge.cattle.io/mqtt\n  model:\n    apiVersion: "devices.edge.cattle.io/v1alpha1"\n    kind: "MQTTDevice"\n  template:\n    spec:\n      protocol:\n        pattern: "AttributedTopic"\n        client:\n          ...\n        message:\n-         topic: "cattle.io/octopus/home/your/device/:path"\n+         topic: "cattle.io/octopus/home/your/device/:path/:operator"\n+         operator:\n+           write: "set"\n      properties:\n        # subscribes to "cattle.io/octopus/home/your/device/property-a" topic\n        - name: property-a\n          type: string\n        # subscribes to "cattle.io/octopus/home/your/device/path/to/property-b" topic\n        - name: property-b\n          path: "path/to/property-b"\n          type: string\n        # subscribes to "cattle.io/octopus/home/your/device/property-c" topic\n-       # publishes  to "cattle.io/octopus/home/your/device/property-c" topic\n+       # publishes  to "cattle.io/octopus/home/your/device/property-c/set" topic\n        - name: property-c\n          readOnly: false\n          type: string\n')),Object(i.b)("p",null,"Note that ",Object(i.b)("inlineCode",{parentName:"p"},":operator")," can be overwritten."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-diff"}),'apiVersion: edge.cattle.io/v1alpha1\nkind: DeviceLink\n...\nspec:\n  adaptor:\n    ...\n    name: adaptors.edge.cattle.io/mqtt\n  model:\n    apiVersion: "devices.edge.cattle.io/v1alpha1"\n    kind: "MQTTDevice"\n  template:\n    spec:\n      protocol:\n        pattern: "AttributedTopic"\n        client:\n          ...\n        message:\n          topic: "cattle.io/octopus/home/your/device/:path/:operator"\n          operator:\n            write: "set"\n      properties:\n        # subscribes to "cattle.io/octopus/home/your/device/property-a" topic\n        - name: property-a\n          type: string\n        # subscribes to "cattle.io/octopus/home/your/device/path/to/property-b" topic\n        - name: property-b\n          path: "path/to/property-b"\n          type: string\n        # subscribes to "cattle.io/octopus/home/your/device/property-c" topic\n-       # publishes  to "cattle.io/octopus/home/your/device/property-c/set" topic\n+       # publishes  to "cattle.io/octopus/home/your/device/property-c/update" topic\n        - name: property-c\n          readOnly: false\n          type: string\n+         operator:\n+           write: "update"\n')),Object(i.b)("h4",{id:"attributedmessage"},"AttributedMessage"),Object(i.b)("p",null,"Specifiy ",Object(i.b)("inlineCode",{parentName:"p"},"pattern: AttributedMessage")," to interact with equipment that compresses its properties in one topic."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-diff"}),'apiVersion: edge.cattle.io/v1alpha1\nkind: DeviceLink\n...\nspec:\n  adaptor:\n    ...\n    name: adaptors.edge.cattle.io/mqtt\n  model:\n    apiVersion: "devices.edge.cattle.io/v1alpha1"\n    kind: "MQTTDevice"\n  template:\n    spec:\n      protocol:\n+      pattern: "AttributedMessage"\n       client:\n         ...\n       message:\n         ...\n      ...\n')),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},Object(i.b)("inlineCode",{parentName:"p"},"AttributedMessage")," pattern only supports JSON format payload content at present."))),Object(i.b)("p",null,"If the JSON of payload content looks as below:"),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{}),'{\n    "property-a":"value-a",\n    "property-b":false,\n    "property-c":{\n        "c1":"c1",\n        "c2":[\n            "c2.1",\n            "c2.2"\n        ]\n    }\n}\n\n')),Object(i.b)("p",null,"Extracts the content via property ",Object(i.b)("inlineCode",{parentName:"p"},"name"),"."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-diff"}),'apiVersion: edge.cattle.io/v1alpha1\nkind: DeviceLink\n...\nspec:\n  adaptor:\n    ...\n    name: adaptors.edge.cattle.io/mqtt\n  model:\n    apiVersion: "devices.edge.cattle.io/v1alpha1"\n    kind: "MQTTDevice"\n  template:\n    spec:\n      protocol:\n        pattern: "AttributedMessage"\n        client:\n          ...\n        message:\n+         # subscribes to "cattle.io/octopus/home/your/device" topic\n+         topic: "cattle.io/octopus/home/your/device"\n      properties:\n+       # extracts the content of the corresponding JSONPath: "property-a"\n+       - name: property-a\n+         type: string\n')),Object(i.b)("p",null,"Or indicate the retrival ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#jsonpath"}),"JSONPath")," in ",Object(i.b)("inlineCode",{parentName:"p"},"path")," field."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-diff"}),'apiVersion: edge.cattle.io/v1alpha1\nkind: DeviceLink\n...\nspec:\n  adaptor:\n    ...\n    name: adaptors.edge.cattle.io/mqtt\n  model:\n    apiVersion: "devices.edge.cattle.io/v1alpha1"\n    kind: "MQTTDevice"\n  template:\n    spec:\n      protocol:\n        pattern: "AttributedMessage"\n        client:\n          ...\n        message:\n          # subscribes to "cattle.io/octopus/home/your/device" topic\n          topic: "cattle.io/octopus/home/your/device"\n      properties:\n        # extracts the content of the corresponding JSONPath: "property-a"\n        - name: property-a\n          type: string\n+       # extracts the content of the corresponding JSONPath: "property-c.c1"\n+       - name: c1\n+         path: "property-c.c1"\n+         type: "string"\n')),Object(i.b)("p",null,"Specifies a writable property with ",Object(i.b)("inlineCode",{parentName:"p"},"readOnly: false"),"."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-diff"}),'apiVersion: edge.cattle.io/v1alpha1\nkind: DeviceLink\n...\nspec:\n  adaptor:\n    ...\n    name: adaptors.edge.cattle.io/mqtt\n  model:\n    apiVersion: "devices.edge.cattle.io/v1alpha1"\n    kind: "MQTTDevice"\n  template:\n    spec:\n      protocol:\n        pattern: "AttributedMessage"\n        client:\n          ...\n        message:\n          # subscribes to "cattle.io/octopus/home/your/device" topic\n          topic: "cattle.io/octopus/home/your/device"\n      properties:\n        # extracts the content of the corresponding JSONPath: "property-a"\n        - name: property-a\n          type: string\n        # extracts the content of the corresponding JSONPath: "property-c.c1"\n        - name: c1\n          path: "property-c.c1"\n          type: "string"\n+       # extracts the content of the corresponding JSONPath: "property-b",\n+       # and publishs to "cattle.io/octopus/home/your/device" if indicated the value.\n+       - name: property-b\n+         type: boolean\n+         readOnly: false\n')),Object(i.b)("p",null,"Changes the publish topic."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-diff"}),'apiVersion: edge.cattle.io/v1alpha1\nkind: DeviceLink\n...\nspec:\n  adaptor:\n    ...\n    name: adaptors.edge.cattle.io/mqtt\n  model:\n    apiVersion: "devices.edge.cattle.io/v1alpha1"\n    kind: "MQTTDevice"\n  template:\n    spec:\n      protocol:\n        pattern: "AttributedMessage"\n        client:\n          ...\n        message:\n          # subscribes to "cattle.io/octopus/home/your/device" topic\n          topic: "cattle.io/octopus/home/your/device"\n+         operator:\n+           write: "set"\n      properties:\n        # extracts the content of the corresponding JSONPath: "property-a"\n        - name: property-a\n          type: string\n        # extracts the content of the corresponding JSONPath: "property-c.c1"\n        - name: c1\n          path: "property-c.c1"\n          type: "string"\n        # extracts the content of the corresponding JSONPath: "property-b",\n-       # and publishes to "cattle.io/octopus/home/your/device" if indicated the value.\n+       # and publishes the \'{"property-b":true}\' to "cattle.io/octopus/home/your/device/set".\n        - name: property-b\n          type: boolean\n          readOnly: false\n+         value: true\n')),Object(i.b)("h3",{id:"jsonpath"},"JSONPath"),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"JSONPath is only available in ",Object(i.b)("inlineCode",{parentName:"p"},"AttributedMessage")," pattern."))),Object(i.b)("p",null,"MQTT adaptor has integrated both ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/tidwall/gjson"}),"tidwall/gjson")," and ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/tidwall/sjson"}),"tidwall/sjson"),". "),Object(i.b)("p",null,"For ",Object(i.b)("strong",{parentName:"p"},"Read Only")," property, ",Object(i.b)("inlineCode",{parentName:"p"},"path")," field can accept ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/tidwall/gjson/blob/master/SYNTAX.md"}),"GJSON Path Syntax"),", which is an amazing and richable path retrieval mechanism."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{}),'# given JSON\n\n{\n  "name": {"first": "Tom", "last": "Anderson"},\n  "age": 37,\n  "children": ["Sara","Alex","Jack"],\n  "fav.movie": "Deer Hunter",\n  "friends": [\n    {"first": "Dale", "last": "Murphy", "age": 44, "nets": ["ig", "fb", "tw"]},\n    {"first": "Roger", "last": "Craig", "age": 68, "nets": ["fb", "tw"]},\n    {"first": "Jane", "last": "Murphy", "age": 47, "nets": ["ig", "tw"]}\n  ]\n}\n\n# basic retrival\nname.last -> "Anderson"\n\n# array retrival\nchildren.0 -> "Sara"\n\n# wildcards\nchild*.2 -> " Jack"\n\n# queries\nfriends.#(last=="Murphy").first -> "Dale"\n')),Object(i.b)("p",null,"However, against ",Object(i.b)("strong",{parentName:"p"},"Writable")," property, ",Object(i.b)("inlineCode",{parentName:"p"},"path")," field can only accept ",Object(i.b)("em",{parentName:"p"},"restricted")," ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/tidwall/sjson#path-syntax"}),"SJSON Path Syntax"),"."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{}),'\n# given JSON\n\n{\n  "name": {"first": "Tom", "last": "Anderson"},\n  "age": 37,\n  "children": ["Sara","Alex","Jack"],\n  "fav.movie": "Deer Hunter",\n  "friends": [\n    {"first": "James", "last": "Murphy"},\n    {"first": "Roger", "last": "Craig"}\n  ]\n}\n\n# basic patch\nname.last <- "Murphy"\n\n# array patch\nchildren.1 <- "Frank"\n')),Object(i.b)("p",null,"In order to ensure consistent read/write path for a property, MQTT adaptor prevents the following paths on ",Object(i.b)("strong",{parentName:"p"},"Writable")," property:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"children.-1")," is not allowed;"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"children|@reverse")," is not allowed;"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"child*.2")," is not allowed;"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"c?ildren.0")," is not allowed;"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"friends.#.first")," is not allowed.")),Object(i.b)("h3",{id:"user-story"},"User Story"),Object(i.b)("p",null,"Imagine that our home appliances are very smart and can actively report their status information to an MQTT broker, and then we will use ",Object(i.b)("inlineCode",{parentName:"p"},"MQTTDevice")," to link these information. For example, our kitchen door can tell us its production information, its closed status and so on."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{}),"cattle.io/octopus/home/status/kitchen/door/state -> open\n...\ncattle.io/octopus/home/status/kitchen/door/production_material -> wood\n")),Object(i.b)("p",null,"We can define a ",Object(i.b)("inlineCode",{parentName:"p"},"MQTTDevice")," device link with ",Object(i.b)("inlineCode",{parentName:"p"},"AttributedTopic")," pattern to watch our kitchen door."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-YAML"}),'apiVersion: edge.cattle.io/v1alpha1\nkind: DeviceLink\nmetadata:\n  namespace: smart-home\n  name: kitchen-door\nspec:\n  adaptor:\n    node: kitchen\n    name: adaptors.edge.cattle.io/mqtt\n  model:\n    apiVersion: "devices.edge.cattle.io/v1alpha1"\n    kind: "MQTTDevice"\n  template:\n    spec:\n      protocol:\n        pattern: "AttributedTopic"\n        client:\n          server: "..."\n        message:\n          topic: "cattle.io/octopus/home/status/kitchen/door/:path"\n      properties:\n        - name: "state"\n          type: "string"\n        ...\n        - name: "material"\n          path: "production_material"\n          type: "string"\n')),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"In ",Object(i.b)("inlineCode",{parentName:"p"},"AttributedTopic")," pattern, each ",Object(i.b)("inlineCode",{parentName:"p"},"property")," is a topic. By default, the ",Object(i.b)("inlineCode",{parentName:"p"},"name")," of property can be used as the ",Object(i.b)("inlineCode",{parentName:"p"},":path")," keyword to render the topic, and finally get the corresponding topic to subscribe. ")),Object(i.b)("p",null,"The kitchen light also reports its properties to MQTT broker and allow us to control it remotely."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{}),"cattle.io/octopus/home/status/kitchen/light/switch -> false\ncattle.io/octopus/home/get/kitchen/light/gear -> low\n...\n\n# to turn on the kitchen light\ncattle.io/octopus/home/set/kitchen/light/switch <- true\n# to control the kitchen light\ncattle.io/octopus/hom/control/kitchen/light/gear <- mid\n")),Object(i.b)("p",null,"We can use the writable properties of ",Object(i.b)("inlineCode",{parentName:"p"},"MQTTDevice")," device link to control the kitchen light."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-YAML"}),'apiVersion: edge.cattle.io/v1alpha1\nkind: DeviceLink\nmetadata:\n  namespace: smart-home\n  name: kitchen-light\nspec:\n  adaptor:\n    node: kitchen\n    name: adaptors.edge.cattle.io/mqtt\n  model:\n    apiVersion: "devices.edge.cattle.io/v1alpha1"\n    kind: "MQTTDevice"\n  template:\n    spec:\n      protocol:\n        pattern: "AttributedTopic"\n        client:\n          server: "..."\n        message:\n          topic: "cattle.io/octopus/home/:operator/kitchen/light/:path"\n          operator:\n            read: "status"\n            write: "set"\n      properties:\n        - name: "switch"\n          type: "boolean"\n          readOnly: false\n        - name: "gear"\n          type: "string"\n          readOnly: false\n          operator:\n            read: "get"\n            write: "control"\n        ...\n')),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"Use ",Object(i.b)("inlineCode",{parentName:"p"},"readOnly: false")," to conifgure a writable property. In addition, the property level ",Object(i.b)("inlineCode",{parentName:"p"},"operator")," can override the definition of the protocol level in ",Object(i.b)("inlineCode",{parentName:"p"},"AttributedTopic")," pattern.")),Object(i.b)("p",null,"For example, we can ",Object(i.b)("em",{parentName:"p"},"turn on")," the kitchen light and adjust it to ",Object(i.b)("em",{parentName:"p"},"mid")," level."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-diff"}),'apiVersion: edge.cattle.io/v1alpha1\nkind: DeviceLink\nmetadata:\n  namespace: smart-home\n  name: kitchen-light\nspec:\n  ...\n  template:\n    spec:\n      protocol:\n        pattern: "AttributedTopic"\n        client:\n          server: "..."\n        message:\n          topic: "cattle.io/octopus/home/:operator/kitchen/light/:path"\n          operator:\n            read: "status"\n            write: "set"\n      properties:\n        - name: "switch"\n          type: "boolean"\n          readOnly: false\n+         value: true\n        - name: "gear"\n          type: "string"\n          readOnly: false\n          operator:\n            read: "get"\n            write: "control"\n+          value: "mid"\n        ...\n')),Object(i.b)("p",null,"Futher, we can monitor the status of door and light in the same ",Object(i.b)("inlineCode",{parentName:"p"},"MQTTDevice")," device link."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-YAML"}),'apiVersion: edge.cattle.io/v1alpha1\nkind: DeviceLink\nmetadata:\n  namespace: smart-home\n  name: kitchen-monitor\nspec:\n  adaptor:\n    node: kitchen\n    name: adaptors.edge.cattle.io/mqtt\n  model:\n    apiVersion: "devices.edge.cattle.io/v1alpha1"\n    kind: "MQTTDevice"\n  template:\n    spec:\n      protocol:\n        pattern: "AttributedTopic"\n        client:\n          server: "..."\n        message:\n          topic: "cattle.io/octopus/home/:operator/kitchen/:path"\n          operator:\n            read: status\n      properties:\n        - name: "doorState"\n          path: "door/state"\n          type: "string"\n        - name: "isLightOn"\n          path: "light/switch"\n          type: "boolean"\n        - name: "lightGear"\n          path: "light/gear"\n          type: "string"\n          operator:\n            read: get\n')),Object(i.b)("p",null,"Recently we bought a new smart bedroom light, but we found that the format of the transmitted data is different from the previous one."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{}),'cattle.io/octopus/home/bedroom/light -> {"switch":true,"action":{"gear":"low"},"parameter":{"power":70,"luminance":4900},"production":{"manufacturer":"Rancher Octopus Fake Device","date":"2020-07-09T13:00:00.00Z","serviceLife":"P1Y0M0D"}}\n\n# to turn off the bedroom light\ncattle.io/octopus/home/bedroom/light/set <- {"switch":false}\n# to control the kitchen light\ncattle.io/octopus/home/bedroom/light/set <- {"action":{"gear":"mid"}}\n')),Object(i.b)("p",null,"We can define a ",Object(i.b)("inlineCode",{parentName:"p"},"MQTTDevice")," device link with ",Object(i.b)("inlineCode",{parentName:"p"},"AttributedMessage")," pattern to monitor the new bedroom light."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-YAML"}),'apiVersion: edge.cattle.io/v1alpha1\nkind: DeviceLink\nmetadata:\n  namespace: smart-home\n  name: bedroom-light\nspec:\n  adaptor:\n    node: bedroom\n    name: adaptors.edge.cattle.io/mqtt\n  model:\n    apiVersion: "devices.edge.cattle.io/v1alpha1"\n    kind: "MQTTDevice"\n  template:\n    spec:\n      protocol:\n        pattern: "AttributedMessage"\n        client:\n          server: "..."\n        message:\n          topic: "cattle.io/octopus/home/bedroom/light"\n      properties:\n        - name: "switch"\n          type: "boolean"\n        - name: "gear"\n          path: "action.gear"\n          type: "string"\n        ...\n        - name: "serviceLife"\n          path: "production.serviceLife"\n          type: "string"\n')),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"In ",Object(i.b)("inlineCode",{parentName:"p"},"AttributedMessage")," pattern, the whole link is a topic. By default, the ",Object(i.b)("inlineCode",{parentName:"p"},"name")," of property can be used as the retrieval path of payload content.")),Object(i.b)("p",null,"We can modify the above ",Object(i.b)("inlineCode",{parentName:"p"},"MQTTDevice")," device link if needed to turn off the new bedroom light."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-diff"}),'apiVersion: edge.cattle.io/v1alpha1\nkind: DeviceLink\nmetadata:\n  namespace: smart-home\n  name: bedroom-light\nspec:\n  ...\n  template:\n    ...\n    spec:\n      protocol:\n        pattern: "AttributedMessage"\n        client:\n          server: "..."\n        message:\n-         topic: "cattle.io/octopus/home/bedroom/light"\n+         topic: "cattle.io/octopus/home/bedroom/light/:operator"\n+         operator:\n+           write: "set"\n      properties:\n        - name: "switch"\n          type: "boolean"\n+         readOnly: false\n+         value: false\n        - name: "gear"\n          path: "action.gear"\n          type: "string"\n        ...\n        - name: "serviceLife"\n          path: "production.serviceLife"\n          type: "string"\n')),Object(i.b)("h2",{id:"registration-information"},"Registration Information"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Versions"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Register Name"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Endpoint Socket"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Available"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("inlineCode",{parentName:"td"},"v1alpha1")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("inlineCode",{parentName:"td"},"adaptors.edge.cattle.io/mqtt")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("inlineCode",{parentName:"td"},"mqtt.sock")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"*")))),Object(i.b)("h2",{id:"support-model"},"Support Model"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Kind"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Group"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Version"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Available"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("inlineCode",{parentName:"td"},"MQTTDevice")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("inlineCode",{parentName:"td"},"devices.edge.cattle.io")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("inlineCode",{parentName:"td"},"v1alpha1")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"*")))),Object(i.b)("h2",{id:"support-platform"},"Support Platform"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"OS"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Arch"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("inlineCode",{parentName:"td"},"linux")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("inlineCode",{parentName:"td"},"amd64"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("inlineCode",{parentName:"td"},"linux")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("inlineCode",{parentName:"td"},"arm"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("inlineCode",{parentName:"td"},"linux")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("inlineCode",{parentName:"td"},"arm64"))))),Object(i.b)("h2",{id:"usage"},"Usage"),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell",metastring:"script",script:!0}),"kubectl apply -f https://raw.githubusercontent.com/cnrancher/octopus/master/adaptors/mqtt/deploy/e2e/all_in_one.yaml\n")),Object(i.b)("h2",{id:"authority"},"Authority"),Object(i.b)("p",null,"Grant permissions to Octopus as below ",":"),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-text"}),"  Resources                                   Non-Resource URLs  Resource Names  Verbs\n  ---------                                   -----------------  --------------  -----\n  mqttdevices.devices.edge.cattle.io         []                 []              [create delete get list patch update watch]\n  mqttdevices.devices.edge.cattle.io/status  []                 []              [get patch update]\n")),Object(i.b)("h2",{id:"example"},"Example"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Specifies a ",Object(i.b)("inlineCode",{parentName:"p"},"MQTTDevice")," device link to subscribe the information of kitchen room door."),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-YAML"}),'apiVersion: edge.cattle.io/v1alpha1\nkind: DeviceLink\nmetadata:\n  name: kitchen-door\nspec:\n  adaptor:\n    node: edge-worker\n    name: adaptors.edge.cattle.io/mqtt\n  model:\n    apiVersion: "devices.edge.cattle.io/v1alpha1"\n    kind: "MQTTDevice"\n  template:\n    metadata:\n      labels:\n        device: kitchen-door\n    spec:\n      protocol:\n        pattern: "AttributedTopic"\n        client:\n          server: "tcp://test.mosquitto.org:1883"\n        message:\n          topic: "cattle.io/octopus/home/status/kitchen/door/:path"\n      properties:\n        - name: "state"\n          path: "state"\n          description: "The state of door"\n          type: "string"\n          annotations:\n            type: "enum"\n            format: "open,close"\n        - name: "width"\n          path: "width"\n          description: "The width of door"\n          type: "float"\n          annotations:\n            unit: "meter"\n        - name: "height"\n          path: "height"\n          description: "The height of door"\n          type: "float"\n          annotations: \n            unit: "meter"\n        - name: "material"\n          path: "material"\n          description: "The material of light"\n          type: "string"\n'))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Specifies a ",Object(i.b)("inlineCode",{parentName:"p"},"MQTTDevice")," device link to manage the bedroom light."),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-YAML"}),'apiVersion: edge.cattle.io/v1alpha1\nkind: DeviceLink\nmetadata:\n  name: bedroom-light\nspec:\n  adaptor:\n    node: edge-worker\n    name: adaptors.edge.cattle.io/mqtt\n  model:\n    apiVersion: "devices.edge.cattle.io/v1alpha1"\n    kind: "MQTTDevice"\n  template:\n    metadata:\n      labels:\n        device: bedroom-light\n    spec:\n      protocol:\n        pattern: "AttributedMessage"\n        client:\n          server: "tcp://test.mosquitto.org:1883"\n        message:\n          topic: "cattle.io/octopus/home/bedroom/light/:operator"\n          operator:\n            write: "set"\n      properties:\n        - name: "switch"\n          path: "switch"\n          description: "The switch of light"\n          type: "boolean"\n          readOnly: false\n        - name: "gear"\n          path: "action.gear"\n          description: "The gear of light"\n          type: "string"\n          readOnly: false\n          annotations:\n            type: "enum"\n            format: "low,mid,high"\n        - name: "power"\n          path: "parameter.power"\n          description: "The power of light"\n          type: "float"\n          annotations:\n            group: "parameter"\n            unit: "watt"\n        - name: "luminance"\n          path: "parameter.luminance"\n          description: "The luminance of light"\n          type: "int"\n          annotations:\n            group: "parameter"\n            unit: "luminance"\n        - name: "manufacturer"\n          path: "production.manufacturer"\n          description: "The manufacturer of light"\n          type: "string"\n          annotations:\n            group: "production"\n        - name: "productionDate"\n          path: "production.date"\n          description: "The production date of light"\n          type: "string"\n          annotations:\n            group: "production"\n            type: "datetime"\n            standard: "ISO 8601"\n            format: "YYYY-MM-DDThh:mm:ss.SSZ"\n        - name: "serviceLife"\n          path: "production.serviceLife"\n          description: "The service life of light"\n          type: "string"\n          annotations:\n            group: "production"\n            type: "duration"\n            standard: "ISO 8601"\n            format: "PYYMMDD"\n')))),Object(i.b)("p",null,"For more ",Object(i.b)("inlineCode",{parentName:"p"},"MQTTDevice")," device link examples, please refer to the ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/cnrancher/octopus/tree/master/adaptors/mqtt/deploy/e2e"}),"deploy/e2e")," directory."),Object(i.b)("h2",{id:"mqttdevice"},"MQTTDevice"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Parameter"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Description"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Schema"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Required"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"metadata"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"})),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"https://github.com/kubernetes/apimachinery/blob/master/pkg/apis/meta/v1/types.go#L110"}),"metav1.ObjectMeta")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"false")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"spec"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Defines the desired state of ",Object(i.b)("inlineCode",{parentName:"td"},"MQTTDevice"),"."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"#mqttdevicespec"}),"MQTTDeviceSpec")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"true")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"status"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Defines the observed state of ",Object(i.b)("inlineCode",{parentName:"td"},"MQTTDevice"),"."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"#mqttdevicestatus"}),"MQTTDeviceStatus")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"false")))),Object(i.b)("h3",{id:"mqttdevicespec"},"MQTTDeviceSpec"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Parameter"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Description"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Schema"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Required"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"protocol"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Specifies the protocol for accessing the MQTT service."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"#mqttdeviceprotocol"}),"MQTTDeviceProtocol")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"true")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"properties"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Specifies the properties of device."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"#mqttdeviceproperty"}),"[]MQTTDeviceProperty")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"false")))),Object(i.b)("h3",{id:"mqttdevicestatus"},"MQTTDeviceStatus"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Parameter"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Description"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Schema"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Required"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"properties"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Reports the properties of device."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"#mqttdevicestatusproperty"}),"[]MQTTDeviceStatusProperty")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"false")))),Object(i.b)("h4",{id:"mqttdeviceprotocol"},"MQTTDeviceProtocol"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Parameter"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Description"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Schema"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Required"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"pattern"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Specifies the pattern of MQTTDevice protocol."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"#mqttdevicepattern"}),"MQTTDevicePattern")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"true")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"client"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Specifies the client settings."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"/docs-octopus/docs/en/adaptors/mqtt-extension#mqttclientoptions"}),"MQTTClientOptions")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"true")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"message"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Specifies the message settings."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"/docs-octopus/docs/en/adaptors/mqtt-extension#mqttmessageoptions"}),"MQTTMessageOptions")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"true")))),Object(i.b)("h4",{id:"mqttdevicepattern"},"MQTTDevicePattern"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Parameter"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Description"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Schema"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"AttributedMessage"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Compress properties into one message, one topic has its all property values."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"string")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"AttributedTopic"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Flatten properties to topic, each topic has its own property value."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"string")))),Object(i.b)("h4",{id:"mqttdeviceproperty"},"MQTTDeviceProperty"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Parameter"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Description"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Schema"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Required"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"annotations"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Specifies the annotations of property."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"map","[string]","string"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"false")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"name"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Specifies the name of property."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"string"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"true")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"description"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Specifies the description of property."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"string"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"false")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"readOnly"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Specifies if the property is read-only, default to ",Object(i.b)("inlineCode",{parentName:"td"},"true"),"."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"*bool"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"false")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"type"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Specifies the type of property."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"#mqttdevicepropertytype"}),"MQTTDevicePropertyType")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"true")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"value"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Specifies the value of property, only available in the writable property."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"#mqttdevicepropertyvalue"}),"MQTTDevicePropertyValue")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"false")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"path"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Specifies the path for rendering the ",Object(i.b)("inlineCode",{parentName:"td"},":path")," keyword of topic, default is the same as the ",Object(i.b)("inlineCode",{parentName:"td"},"name"),". ",Object(i.b)("br",null),Object(i.b)("br",null)," In ",Object(i.b)("inlineCode",{parentName:"td"},"AttributedTopic")," pattern, this path will be rendered on topic; ",Object(i.b)("br",null)," In ",Object(i.b)("inlineCode",{parentName:"td"},"AttributedMessage")," pattern, this path should be a ",Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"#jsonpath"}),Object(i.b)("inlineCode",{parentName:"a"},"JSONPath"))," which can access the payload content."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"string"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"false")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"operator"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Specifies the operator for rendering the ",Object(i.b)("inlineCode",{parentName:"td"},":operator")," keyword of topic."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"*",Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"/docs-octopus/docs/en/adaptors/mqtt-extension#mqttmessagetopicoperator"}),"MQTTMessageTopicOperator")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"false")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"qos"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Specifies the QoS of the message, only available in ",Object(i.b)("inlineCode",{parentName:"td"},"AttributedTopic")," pattern. The default value is ",Object(i.b)("inlineCode",{parentName:"td"},"1"),"."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"*",Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"/docs-octopus/docs/en/adaptors/mqtt-extension#mqttmessageqoslevel"}),"MQTTMessageQoSLevel")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"false")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"retained"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Specifies if the last published message to be retained, only available in ",Object(i.b)("inlineCode",{parentName:"td"},"AttributedTopic")," pattern. The default is ",Object(i.b)("inlineCode",{parentName:"td"},"true"),"."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"*bool"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"false")))),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"In fact, MQTT adaptor will return the original data received by MQTT broker. Therefore, the meaning of ",Object(i.b)("inlineCode",{parentName:"p"},"type")," is not to tell MQTT adaptor how to deal with the payload, but for user to describe what is expected.")),Object(i.b)("h4",{id:"mqttdevicestatusproperty"},"MQTTDeviceStatusProperty"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Parameter"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Description"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Schema"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Required"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"annotations"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Reports the annotations of property."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"map","[string]","string"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"false")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"name"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Reports the name of property."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"string"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"false")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"description"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Reports the description of property."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"string"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"false")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"readOnly"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Reports if the property is read-only."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"*bool"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"false")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"type"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Reports the type of property. ",Object(i.b)("br",null)),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"#mqttdevicepropertytype"}),"MQTTDevicePropertyType")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"false")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"value"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Reports the value of property."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"#mqttdevicepropertyvalue"}),"MQTTDevicePropertyValue")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"false")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"path"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Reports the path for rendering the ",Object(i.b)("inlineCode",{parentName:"td"},":path")," keyword of topic, default is the same as the ",Object(i.b)("inlineCode",{parentName:"td"},"name")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"string"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"false")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"operator"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Reports the operator for rendering the ",Object(i.b)("inlineCode",{parentName:"td"},":operator")," keyword of topic."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"*",Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"/docs-octopus/docs/en/adaptors/mqtt-extension#mqttmessagetopicoperator"}),"MQTTMessageTopicOperator")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"false")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"qos"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Reports the QoS of the message."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"*",Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"/docs-octopus/docs/en/adaptors/mqtt-extension#mqttmessageqoslevel"}),"MQTTMessageQoSLevel")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"false")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"retained"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Reports if the last published message to be retained."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"*bool"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"false")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"updatedAt"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Reports the updated timestamp of property."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"*",Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"https://github.com/kubernetes/apimachinery/blob/master/pkg/apis/meta/v1/time.go#L33"}),"metav1.Time")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"false")))),Object(i.b)("h4",{id:"mqttdevicepropertytype"},"MQTTDevicePropertyType"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Parameter"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Description"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Schema"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"string"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Property data type is string."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"string")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"int"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Property data type is int."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"string")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"float"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Property data type is float."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"string")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"boolean"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Property data type is boolean."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"string")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"array"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Property data type is array."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"string")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"object"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Property data type is object."),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"string")))),Object(i.b)("h4",{id:"mqttdevicepropertyvalue"},"MQTTDevicePropertyValue"),Object(i.b)("p",null,"MQTTDevicePropertyValue needs to be inputed with the corresponding content according to the ",Object(i.b)("inlineCode",{parentName:"p"},"type"),". For example:"),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-YAML"}),'apiVersion: edge.cattle.io/v1alpha1\nkind: DeviceLink\n...\nspec:\n  ...\n  template:\n    ...\n    spec:\n      ...\n      properties:\n        - name: "string"\n          readOnly: false\n          type: "string"\n          value: "str"\n        - name: "int"\n          readOnly: false\n          type: "int"\n          value: 1\n        - name: "float"\n          readOnly: false\n          type: "float"\n          value: 3.3\n        - name: "bool"\n          readOnly: false\n          type: "boolean"\n          value: true\n        - name: "array"\n          readOnly: false\n          type: "array"\n          value:\n            - item-1\n            - item-2\n            - item-3\n        - name: "object"\n          readOnly: false\n          type: "object"\n          value:\n            name: "james"\n            age: 12\n')))}l.isMDXComponent=!0},187:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return O}));var n=a(0),r=a.n(n);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var b=r.a.createContext({}),l=function(e){var t=r.a.useContext(b),a=t;return e&&(a="function"==typeof e?e(t):c({},t,{},e)),a},s=function(e){var t=l(e.components);return r.a.createElement(b.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},m=Object(n.forwardRef)((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,o=e.parentName,b=p(e,["components","mdxType","originalType","parentName"]),s=l(a),m=n,O=s["".concat(o,".").concat(m)]||s[m]||d[m]||i;return a?r.a.createElement(O,c({ref:t},b,{components:a})):r.a.createElement(O,c({ref:t},b))}));function O(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,o=new Array(i);o[0]=m;var c={};for(var p in t)hasOwnProperty.call(t,p)&&(c[p]=t[p]);c.originalType=e,c.mdxType="string"==typeof e?e:n,o[1]=c;for(var b=2;b<i;b++)o[b]=a[b];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,a)}m.displayName="MDXCreateElement"}}]);